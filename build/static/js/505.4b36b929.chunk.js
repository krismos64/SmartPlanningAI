"use strict";(self.webpackChunksmartplanning_ai=self.webpackChunksmartplanning_ai||[]).push([[505],{1291:(e,r,s)=>{s.d(r,{AD:()=>h,J4:()=>p,JV:()=>S,Q$:()=>T,Ww:()=>g,Yq:()=>i,Z1:()=>b,cM:()=>f,hi:()=>v,rL:()=>m,rm:()=>d,vn:()=>E,w_:()=>y});var a=s(2802),t=s(1620),n=s(8605),o=s(1821),c=s(6981),u=(s(6465),s(7358),s(7735),s(3031),s(2227)),l=s(3418);const i=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy";if(!e)return"";try{const s=e instanceof Date?e:new Date(e);return isNaN(s.getTime())?(console.error("Date invalide dans formatDate:",e),""):(0,a.GP)(s,r,{locale:u.fr})}catch(s){return console.error("Erreur lors du formatage de la date:",s,e),""}},d=e=>e?(0,a.GP)(e,"yyyy-MM-dd"):"",m=e=>(0,t.k)(e,{weekStartsOn:1}),g=e=>(0,n.$)(e,{weekStartsOn:1}),p=(e,r)=>(0,o.J)(e,r),E=e=>{const r=m(e),s=[];for(let a=0;a<7;a++)s.push((0,c.f)(r,a));return s},f=e=>{const r=new Date(e).getDay();return 0===r||6===r},y=(e,r)=>{if(!e||!r)return 0;const s=(r.getTime()-e.getTime())/36e5;return Math.round(10*s)/10},h=function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=new Date(e).getDay();return r?["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"][s]:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"][s]},S=e=>{if(!e)return"";const r=new Date(e);return`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`},b=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.YX;if(!e)return!1;const s=new Date(e);if(isNaN(s.getTime()))return!1;const a=S(s);return r.some((e=>e.date===a))},D=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.YX;return!f(e)&&!b(e,r)},T=function(e,r){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.YX;if(!e||!r)return 0;const a=new Date(e),t=new Date(r);if(isNaN(a.getTime())||isNaN(t.getTime()))return 0;if(t<a)return 0;let n=0;const o=new Date(a);for(;o<=t;)D(o,s)&&n++,o.setDate(o.getDate()+1);return n},v=function(e){if(!e)return"";try{const r="string"===typeof e?new Date(e):e,s=String(r.getDate()).padStart(2,"0"),a=String(r.getMonth()+1).padStart(2,"0");return`${s}/${a}/${r.getFullYear()}`}catch(r){return console.error("Erreur lors du formatage de la date:",r),""}}},3418:(e,r,s)=>{s.d(r,{YX:()=>n,_z:()=>o,mM:()=>a,y6:()=>t});const a=[{value:"active",label:"Actif"},{value:"pending",label:"En attente"},{value:"inactive",label:"Inactif"}],t=[{value:"paid",label:"Cong\xe9s pay\xe9s",color:"#4CAF50",defaultQuota:25},{value:"rtt",label:"RTT",color:"#2196F3",defaultQuota:11},{value:"unpaid",label:"Cong\xe9s sans solde",color:"#9E9E9E",defaultQuota:null},{value:"sick",label:"Maladie",color:"#F44336",defaultQuota:null},{value:"exceptional",label:"Absence exceptionnelle",color:"#FF9800",defaultQuota:null},{value:"recovery",label:"R\xe9cup\xe9ration",color:"#9C27B0",defaultQuota:null}],n=[{date:"2024-01-01",name:"Jour de l'an"},{date:"2024-04-01",name:"Lundi de P\xe2ques"},{date:"2024-05-01",name:"F\xeate du Travail"},{date:"2024-05-08",name:"Victoire 1945"},{date:"2024-05-09",name:"Ascension"},{date:"2024-05-20",name:"Lundi de Pentec\xf4te"},{date:"2024-07-14",name:"F\xeate Nationale"},{date:"2024-08-15",name:"Assomption"},{date:"2024-11-01",name:"Toussaint"},{date:"2024-11-11",name:"Armistice 1918"},{date:"2024-12-25",name:"No\xebl"}],o=[{id:"name",header:"Nom",accessor:e=>`${e.first_name} ${e.last_name}`,sortable:!0},{id:"email",header:"Email",accessor:e=>e.email,sortable:!0},{id:"department",header:"D\xe9partement",accessor:e=>e.department,sortable:!0},{id:"role",header:"R\xf4le",accessor:e=>e.role,sortable:!0},{id:"status",header:"Statut",accessor:e=>e.status,sortable:!0,type:"status"},{id:"hour_balance",header:"Solde d'heures",accessor:e=>{const r=e.hour_balance||0,s=r>=0;return{value:r,display:`${s?"+":""}${r}h`,isPositive:s}},sortable:!0,type:"hour_balance"},{id:"hire_date",header:"Date d'embauche",accessor:e=>{if(!e.hire_date)return"";return new Date(e.hire_date).toLocaleDateString("fr-FR")},sortable:!0,type:"date"}]},4505:(e,r,s)=>{s.d(r,{uR:()=>n,uX:()=>o,wv:()=>c});var a=s(4227),t=s(1291);const n={login:async(e,r)=>{console.log("\ud83d\udd10 Tentative de connexion avec:",{email:e,password:"***"});try{const s=await(0,a.AT)(a.Sn.LOGIN,"POST",{email:e,password:r});return s.error?(console.error("\u274c Erreur de connexion:",s.error),{success:!1,message:s.error}):s.token?(console.log("\u2705 Connexion r\xe9ussie, token re\xe7u"),localStorage.setItem("token",s.token),localStorage.setItem("user",JSON.stringify({id:s.id,email:s.email,role:s.role,first_name:s.first_name,last_name:s.last_name})),{success:!0,user:s}):(console.error("\u274c Connexion \xe9chou\xe9e: pas de token re\xe7u"),{success:!1,message:"Erreur d'authentification"})}catch(s){return console.error("\u274c Erreur lors de la connexion:",s),{success:!1,message:s.message||"Erreur de connexion"}}},register:async e=>{try{const r=await(0,a.AT)(a.Sn.REGISTER,"POST",{...e,first_name:e.first_name,last_name:e.last_name});return r.error?{success:!1,message:r.error}:{success:!0,user:r}}catch(r){return{success:!1,message:r.message||"Erreur d'inscription"}}},logout:()=>(localStorage.removeItem("token"),localStorage.removeItem("user"),{success:!0}),getCurrentUser:()=>{const e=localStorage.getItem("user");if(!e)return null;try{return JSON.parse(e)}catch(r){return console.error("Erreur lors de la r\xe9cup\xe9ration de l'utilisateur:",r),null}}},o={getAll:async()=>{try{const e=await(0,a.AT)(a.Sn.WEEKLY_SCHEDULES,"GET");return e.error?{success:!1,message:e.error}:{success:!0,schedules:e}}catch(e){return{success:!1,message:e.message||"Erreur lors de la r\xe9cup\xe9ration des plannings"}}},getByWeek:async e=>{try{if(!e)return console.error("Date de d\xe9but de semaine non sp\xe9cifi\xe9e"),{success:!1,message:"Date de d\xe9but de semaine requise"};const s=localStorage.getItem("token");if(console.error("Token d'authentification:",s?"Pr\xe9sent":"Manquant",s?`(${s.substring(0,10)}...)`:""),!s)return console.error("Token d'authentification manquant"),{success:!1,message:"Vous devez \xeatre connect\xe9 pour acc\xe9der \xe0 ces donn\xe9es"};console.error("Appel API pour r\xe9cup\xe9rer les plannings de la semaine:",e);try{const r=await(0,a.AT)(`${a.Sn.WEEKLY_SCHEDULES}/week/${e}`,"GET");return r.error?(console.error("Erreur API lors de la r\xe9cup\xe9ration des plannings:",r.error),{success:!1,message:r.error,details:r.details||""}):(console.error("R\xe9ponse API pour les plannings:",JSON.stringify(r).substring(0,200)+"..."),{success:!0,schedules:r})}catch(r){return console.error("Exception lors de l'appel API:",r),{success:!1,message:r.message||"Erreur lors de la r\xe9cup\xe9ration des plannings",details:r.details||""}}}catch(s){return console.error("Exception lors de la r\xe9cup\xe9ration des plannings:",s),{success:!1,message:s.message||"Erreur lors de la r\xe9cup\xe9ration des plannings pour cette semaine",details:s.details||""}}},getByEmployee:async e=>{try{const r=await(0,a.AT)(`${a.Sn.EMPLOYEES.SCHEDULES(e)}`,"GET");return r.error?{success:!1,message:r.error}:{success:!0,schedules:r}}catch(r){return{success:!1,message:r.message||"Erreur lors de la r\xe9cup\xe9ration des plannings de l'employ\xe9"}}},getByEmployeeAndWeek:async(e,r)=>{try{if(!e)return console.error("ID employ\xe9 non sp\xe9cifi\xe9"),{success:!1,message:"ID employ\xe9 requis"};if(!r)return console.error("Date de d\xe9but de semaine non sp\xe9cifi\xe9e"),{success:!1,message:"Date de d\xe9but de semaine requise"};let s=r;r instanceof Date?s=(0,t.JV)(r):"string"===typeof r&&r.includes("T")&&(s=r.split("T")[0]),console.error("Appel API pour r\xe9cup\xe9rer le planning de l'employ\xe9:",e,"semaine du:",s);const n=await(0,a.AT)(`${a.Sn.WEEKLY_SCHEDULES}/employee/${e}/week/${s}`,"GET");return n.error?(console.error("Erreur API lors de la r\xe9cup\xe9ration du planning:",n.error),{success:!1,message:n.error}):n}catch(s){return console.error("Exception lors de la r\xe9cup\xe9ration du planning:",s),{success:!1,message:s.message||"Erreur lors de la r\xe9cup\xe9ration du planning"}}},create:async e=>{try{const r=await(0,a.AT)(a.Sn.WEEKLY_SCHEDULES,"POST",e);return r.error?{success:!1,message:r.error}:{success:!0,schedule:r}}catch(r){return{success:!1,message:r.message||"Erreur lors de la cr\xe9ation du planning"}}},update:async(e,r)=>{try{const s=await(0,a.AT)(`${a.Sn.WEEKLY_SCHEDULES}/${e}`,"PUT",r);return s.error?{success:!1,message:s.error}:{success:!0,schedule:s}}catch(s){return{success:!1,message:s.message||"Erreur lors de la mise \xe0 jour du planning"}}},delete:async e=>{try{const r=await(0,a.AT)(`${a.Sn.WEEKLY_SCHEDULES}/${e}`,"DELETE");return r.error?{success:!1,message:r.error}:{success:!0}}catch(r){return{success:!1,message:r.message||"Erreur lors de la suppression du planning"}}}},c={getByEmployee:async e=>{try{const r=await(0,a.AT)(a.Sn.HOUR_BALANCE.BY_EMPLOYEE(e),"GET");if(r&&r.error)return{success:!1,message:r.error};if(r&&"undefined"!==typeof r.balance)return{success:!0,balance:r.balance};if(r&&"object"===typeof r){if("undefined"!==typeof r.hour_balance)return{success:!0,balance:r.hour_balance};if(1===Object.keys(r).length&&"number"===typeof Object.values(r)[0])return{success:!0,balance:Object.values(r)[0]}}return console.warn(`Avertissement: Format de r\xe9ponse inattendu pour le solde d'heures de l'employ\xe9 ${e}:`,r),{success:!0,balance:0}}catch(r){return console.warn("Avertissement lors de la r\xe9cup\xe9ration du solde d'heures:",r),{success:!1,message:r.message||"Erreur lors de la r\xe9cup\xe9ration du solde d'heures"}}},updateBalance:async(e,r)=>{try{const s=await(0,a.AT)(a.Sn.HOUR_BALANCE.BY_EMPLOYEE(e),"PUT",r);return s&&s.error?{success:!1,message:s.error}:{success:!0,balance:s.balance||s.hour_balance||("number"===typeof s?s:0)}}catch(s){return console.error("Erreur lors de la mise \xe0 jour du solde d'heures:",s),{success:!1,message:s.message||"Erreur lors de la mise \xe0 jour du solde d'heures"}}}}}}]);
//# sourceMappingURL=505.4b36b929.chunk.js.map