{"version":3,"file":"static/js/223.1b753138.chunk.js","mappings":"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","sources":["services/api.js","components/schedule/EmployeeScheduleForm.js","hooks/useHourBalance.js","utils/scheduleUtils.js","components/schedule/WeeklyScheduleGrid.js","components/ui/PageHeader.js","components/ui/Spinner.js","hooks/useWeeklySchedules.js","pages/WeeklySchedule.js"],"sourcesContent":["import { API_ENDPOINTS, apiRequest } from \"../config/api\";\n\nexport const AuthService = {\n  login: async (email, password) => {\n    console.log(\"ðŸ” Tentative de connexion avec:\", { email, password: \"***\" });\n    try {\n      const response = await apiRequest(API_ENDPOINTS.LOGIN, \"POST\", {\n        email,\n        password,\n      });\n\n      if (response.error) {\n        console.error(\"âŒ Erreur de connexion:\", response.error);\n        return { success: false, message: response.error };\n      }\n\n      if (response.token) {\n        console.log(\"âœ… Connexion rÃ©ussie, token reÃ§u\");\n        localStorage.setItem(\"token\", response.token);\n        localStorage.setItem(\n          \"user\",\n          JSON.stringify({\n            id: response.id,\n            email: response.email,\n            role: response.role,\n            first_name: response.first_name,\n            last_name: response.last_name,\n          })\n        );\n        return { success: true, user: response };\n      } else {\n        console.error(\"âŒ Connexion Ã©chouÃ©e: pas de token reÃ§u\");\n        return { success: false, message: \"Erreur d'authentification\" };\n      }\n    } catch (error) {\n      console.error(\"âŒ Erreur lors de la connexion:\", error);\n      return {\n        success: false,\n        message: error.message || \"Erreur de connexion\",\n      };\n    }\n  },\n\n  register: async (userData) => {\n    try {\n      const response = await apiRequest(API_ENDPOINTS.REGISTER, \"POST\", {\n        ...userData,\n        first_name: userData.first_name,\n        last_name: userData.last_name,\n      });\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true, user: response };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur d'inscription\",\n      };\n    }\n  },\n\n  logout: () => {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"user\");\n    return { success: true };\n  },\n\n  getCurrentUser: () => {\n    const userStr = localStorage.getItem(\"user\");\n    if (!userStr) return null;\n\n    try {\n      return JSON.parse(userStr);\n    } catch (error) {\n      console.error(\"Erreur lors de la rÃ©cupÃ©ration de l'utilisateur:\", error);\n      return null;\n    }\n  },\n};\n\nexport const EmployeeService = {\n  getAll: async () => {\n    try {\n      const response = await apiRequest(API_ENDPOINTS.EMPLOYEES.BASE, \"GET\");\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true, employees: response };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur lors de la rÃ©cupÃ©ration des employÃ©s\",\n      };\n    }\n  },\n\n  getById: async (id) => {\n    try {\n      const response = await apiRequest(\n        API_ENDPOINTS.EMPLOYEES.BY_ID(id),\n        \"GET\"\n      );\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return {\n        ...response,\n        first_name: response.first_name,\n        last_name: response.last_name,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur lors de la rÃ©cupÃ©ration de l'employÃ©\",\n      };\n    }\n  },\n\n  create: async (employeeData) => {\n    try {\n      const response = await apiRequest(\n        API_ENDPOINTS.EMPLOYEES.BASE,\n        \"POST\",\n        employeeData\n      );\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true, employee: response };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur lors de la crÃ©ation de l'employÃ©\",\n      };\n    }\n  },\n\n  update: async (id, employeeData) => {\n    try {\n      const response = await apiRequest(\n        API_ENDPOINTS.EMPLOYEES.BY_ID(id),\n        \"PUT\",\n        employeeData\n      );\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true, employee: response };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur lors de la mise Ã  jour de l'employÃ©\",\n      };\n    }\n  },\n\n  delete: async (id) => {\n    try {\n      const response = await apiRequest(\n        API_ENDPOINTS.EMPLOYEES.BY_ID(id),\n        \"DELETE\"\n      );\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur lors de la suppression de l'employÃ©\",\n      };\n    }\n  },\n};\n\nexport const VacationService = {\n  getAll: async () => {\n    try {\n      const response = await apiRequest(API_ENDPOINTS.VACATIONS, \"GET\");\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true, vacations: response };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur lors de la rÃ©cupÃ©ration des congÃ©s\",\n      };\n    }\n  },\n\n  getById: async (id) => {\n    try {\n      const response = await apiRequest(\n        `${API_ENDPOINTS.VACATIONS}/${id}`,\n        \"GET\"\n      );\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true, vacation: response };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur lors de la rÃ©cupÃ©ration du congÃ©\",\n      };\n    }\n  },\n\n  create: async (vacationData) => {\n    try {\n      const response = await apiRequest(\n        API_ENDPOINTS.VACATIONS,\n        \"POST\",\n        vacationData\n      );\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true, vacation: response };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur lors de la crÃ©ation du congÃ©\",\n      };\n    }\n  },\n\n  update: async (id, vacationData) => {\n    try {\n      const response = await apiRequest(\n        `${API_ENDPOINTS.VACATIONS}/${id}`,\n        \"PUT\",\n        vacationData\n      );\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true, vacation: response };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur lors de la mise Ã  jour du congÃ©\",\n      };\n    }\n  },\n\n  delete: async (id) => {\n    try {\n      const response = await apiRequest(\n        `${API_ENDPOINTS.VACATIONS}/${id}`,\n        \"DELETE\"\n      );\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur lors de la suppression du congÃ©\",\n      };\n    }\n  },\n};\n\nexport const ActivityService = {\n  getAll: async () => {\n    try {\n      const response = await apiRequest(API_ENDPOINTS.ACTIVITIES.LIST, \"GET\");\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true, activities: response };\n    } catch (error) {\n      return {\n        success: false,\n        message:\n          error.message || \"Erreur lors de la rÃ©cupÃ©ration des activitÃ©s\",\n      };\n    }\n  },\n\n  create: async (activityData) => {\n    try {\n      const response = await apiRequest(\n        API_ENDPOINTS.ACTIVITIES.CREATE,\n        \"POST\",\n        activityData\n      );\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true, activity: response };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur lors de la crÃ©ation de l'activitÃ©\",\n      };\n    }\n  },\n\n  update: async (id, activityData) => {\n    try {\n      const response = await apiRequest(\n        API_ENDPOINTS.ACTIVITIES.UPDATE(id),\n        \"PUT\",\n        activityData\n      );\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true, activity: response };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur lors de la mise Ã  jour de l'activitÃ©\",\n      };\n    }\n  },\n\n  delete: async (id) => {\n    try {\n      const response = await apiRequest(\n        API_ENDPOINTS.ACTIVITIES.DELETE(id),\n        \"DELETE\"\n      );\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur lors de la suppression de l'activitÃ©\",\n      };\n    }\n  },\n};\n\nexport const WeeklyScheduleService = {\n  getAll: async () => {\n    try {\n      const response = await apiRequest(API_ENDPOINTS.WEEKLY_SCHEDULES, \"GET\");\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true, schedules: response };\n    } catch (error) {\n      return {\n        success: false,\n        message:\n          error.message || \"Erreur lors de la rÃ©cupÃ©ration des plannings\",\n      };\n    }\n  },\n\n  getByWeek: async (weekStart) => {\n    try {\n      const response = await apiRequest(\n        `${API_ENDPOINTS.WEEKLY_SCHEDULES}/week/${weekStart}`,\n        \"GET\"\n      );\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true, schedules: response };\n    } catch (error) {\n      return {\n        success: false,\n        message:\n          error.message ||\n          \"Erreur lors de la rÃ©cupÃ©ration des plannings pour cette semaine\",\n      };\n    }\n  },\n\n  getByEmployee: async (employeeId) => {\n    try {\n      const response = await apiRequest(\n        `${API_ENDPOINTS.EMPLOYEES.SCHEDULES(employeeId)}`,\n        \"GET\"\n      );\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true, schedules: response };\n    } catch (error) {\n      return {\n        success: false,\n        message:\n          error.message ||\n          \"Erreur lors de la rÃ©cupÃ©ration des plannings de l'employÃ©\",\n      };\n    }\n  },\n\n  getByEmployeeAndWeek: async (employeeId, weekStart) => {\n    try {\n      const response = await apiRequest(\n        `${API_ENDPOINTS.WEEKLY_SCHEDULES}/employee/${employeeId}/week/${weekStart}`,\n        \"GET\"\n      );\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return response;\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur lors de la rÃ©cupÃ©ration du planning\",\n      };\n    }\n  },\n\n  create: async (scheduleData) => {\n    try {\n      const response = await apiRequest(\n        API_ENDPOINTS.WEEKLY_SCHEDULES,\n        \"POST\",\n        scheduleData\n      );\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true, schedule: response };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur lors de la crÃ©ation du planning\",\n      };\n    }\n  },\n\n  update: async (id, scheduleData) => {\n    try {\n      const response = await apiRequest(\n        `${API_ENDPOINTS.WEEKLY_SCHEDULES}/${id}`,\n        \"PUT\",\n        scheduleData\n      );\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true, schedule: response };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur lors de la mise Ã  jour du planning\",\n      };\n    }\n  },\n\n  delete: async (id) => {\n    try {\n      const response = await apiRequest(\n        `${API_ENDPOINTS.WEEKLY_SCHEDULES}/${id}`,\n        \"DELETE\"\n      );\n\n      if (response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return { success: true };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Erreur lors de la suppression du planning\",\n      };\n    }\n  },\n};\n\nexport const HourBalanceService = {\n  getByEmployee: async (employeeId) => {\n    try {\n      const response = await apiRequest(\n        API_ENDPOINTS.HOUR_BALANCE.BY_EMPLOYEE(employeeId),\n        \"GET\"\n      );\n\n      if (response && response.error) {\n        return { success: false, message: response.error };\n      }\n\n      if (response && typeof response.balance !== \"undefined\") {\n        return { success: true, balance: response.balance };\n      }\n\n      if (response && typeof response === \"object\") {\n        if (typeof response.hour_balance !== \"undefined\") {\n          return { success: true, balance: response.hour_balance };\n        }\n\n        if (\n          Object.keys(response).length === 1 &&\n          typeof Object.values(response)[0] === \"number\"\n        ) {\n          return { success: true, balance: Object.values(response)[0] };\n        }\n      }\n\n      console.warn(\n        `Avertissement: Format de rÃ©ponse inattendu pour le solde d'heures de l'employÃ© ${employeeId}:`,\n        response\n      );\n      return { success: true, balance: 0 };\n    } catch (error) {\n      console.warn(\n        \"Avertissement lors de la rÃ©cupÃ©ration du solde d'heures:\",\n        error\n      );\n      return {\n        success: false,\n        message:\n          error.message || \"Erreur lors de la rÃ©cupÃ©ration du solde d'heures\",\n      };\n    }\n  },\n\n  updateBalance: async (employeeId, balanceData) => {\n    try {\n      const response = await apiRequest(\n        API_ENDPOINTS.HOUR_BALANCE.BY_EMPLOYEE(employeeId),\n        \"PUT\",\n        balanceData\n      );\n\n      if (response && response.error) {\n        return { success: false, message: response.error };\n      }\n\n      return {\n        success: true,\n        balance:\n          response.balance ||\n          response.hour_balance ||\n          (typeof response === \"number\" ? response : 0),\n      };\n    } catch (error) {\n      console.error(\"Erreur lors de la mise Ã  jour du solde d'heures:\", error);\n      return {\n        success: false,\n        message:\n          error.message || \"Erreur lors de la mise Ã  jour du solde d'heures\",\n      };\n    }\n  },\n};\n","import PropTypes from \"prop-types\";\nimport { useCallback, useMemo, useState } from \"react\";\nimport { FaSave, FaTimes } from \"react-icons/fa\";\nimport styled, { keyframes } from \"styled-components\";\nimport {\n  calculateHours,\n  formatDate,\n  formatDateForInput,\n  getDaysOfWeek,\n} from \"../../utils/dateUtils\";\nimport Button from \"../ui/Button\";\nimport { FormInput } from \"../ui/Form\";\n\n// Animations\nconst fadeIn = keyframes`\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n`;\n\nconst FormContainer = styled.div`\n  background-color: ${({ theme }) => theme.colors.background.primary};\n  color: ${({ theme }) => theme.colors.text.primary};\n  border-radius: 8px;\n  box-shadow: 0 4px 12px\n    ${({ theme }) =>\n      theme.mode === \"dark\" ? \"rgba(0, 0, 0, 0.3)\" : \"rgba(0, 0, 0, 0.1)\"};\n  padding: 1.5rem;\n  margin: 1rem 0;\n  animation: ${fadeIn} 0.3s ease-out;\n  max-width: 100%;\n  overflow-x: auto;\n  transition: background-color 0.2s ease, color 0.2s ease;\n\n  @media (max-width: 768px) {\n    padding: 1rem;\n  }\n`;\n\nconst FormTitle = styled.h3`\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin-bottom: 1.5rem;\n  color: ${({ theme }) => theme.colors.text.primary};\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  @media (max-width: 576px) {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.5rem;\n  }\n`;\n\nconst EmployeeInfo = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 1.5rem;\n  padding-bottom: 1rem;\n  border-bottom: 1px solid ${({ theme }) => theme.colors.border};\n\n  @media (min-width: 768px) {\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n`;\n\nconst EmployeeName = styled.div`\n  font-size: 1.1rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n\n  @media (min-width: 768px) {\n    margin-bottom: 0;\n  }\n`;\n\nconst EmployeeDetails = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  font-size: 0.9rem;\n  color: ${({ theme }) => theme.colors.text.secondary};\n\n  @media (min-width: 768px) {\n    align-items: flex-end;\n  }\n`;\n\nconst DaysGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n`;\n\nconst DayCard = styled.div`\n  background-color: ${({ $isWeekend, theme }) =>\n    $isWeekend\n      ? theme.colors.background.tertiary\n      : theme.colors.background.secondary};\n  color: ${({ theme }) => theme.colors.text.primary};\n  border: 1px solid ${({ theme }) => theme.colors.border};\n  border-radius: 6px;\n  padding: 1rem;\n  transition: all 0.2s ease;\n\n  &:hover {\n    box-shadow: 0 2px 8px\n      ${({ theme }) =>\n        theme.mode === \"dark\" ? \"rgba(0, 0, 0, 0.3)\" : \"rgba(0, 0, 0, 0.05)\"};\n  }\n`;\n\nconst DayHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.75rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid ${({ theme }) => theme.colors.border};\n`;\n\nconst DayName = styled.div`\n  font-weight: 600;\n  color: ${({ $isWeekend, theme }) =>\n    $isWeekend ? theme.colors.text.secondary : theme.colors.text.primary};\n`;\n\nconst DayDate = styled.div`\n  font-size: 0.85rem;\n  color: ${({ theme }) => theme.colors.text.secondary};\n`;\n\nconst InputGroup = styled.div`\n  margin-bottom: 0.75rem;\n`;\n\nconst InputLabel = styled.label`\n  display: block;\n  font-size: 0.85rem;\n  font-weight: 500;\n  margin-bottom: 0.25rem;\n  color: ${({ theme }) => theme.colors.text.secondary};\n`;\n\nconst ButtonGroup = styled.div`\n  display: flex;\n  gap: 0.5rem;\n\n  @media (max-width: 576px) {\n    width: 100%;\n    justify-content: flex-end;\n  }\n`;\n\nconst ActionButton = styled(Button)`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  transition: all 0.2s ease;\n\n  &:hover {\n    transform: translateY(-2px);\n  }\n`;\n\nconst TotalHours = styled.div`\n  font-size: 1rem;\n  font-weight: 600;\n  margin-top: 1rem;\n  padding-top: 1rem;\n  border-top: 1px solid ${({ theme }) => theme.colors.border};\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst TimeSlotContainer = styled.div`\n  margin-bottom: 0.5rem;\n`;\n\nconst TimeSlot = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 0.5rem;\n`;\n\nconst TimeInput = styled(FormInput)`\n  width: 100%;\n  max-width: 120px;\n  background-color: ${({ theme }) => theme.colors.background.input};\n  color: ${({ theme }) => theme.colors.text.primary};\n  border-color: ${({ theme }) => theme.colors.border};\n\n  &:focus {\n    border-color: ${({ theme }) => theme.colors.primary.main};\n    box-shadow: 0 0 0 2px\n      ${({ theme }) =>\n        theme.mode === \"dark\"\n          ? \"rgba(59, 130, 246, 0.3)\"\n          : \"rgba(59, 130, 246, 0.2)\"};\n  }\n`;\n\nconst AddSlotButton = styled(Button)`\n  padding: 0.25rem 0.5rem;\n  font-size: 0.8rem;\n  margin-top: 0.25rem;\n`;\n\nconst RemoveSlotButton = styled(Button)`\n  padding: 0.25rem;\n  font-size: 0.8rem;\n  min-width: auto;\n`;\n\nconst RadioGroup = styled.div`\n  display: flex;\n  gap: 1rem;\n  margin-bottom: 0.75rem;\n`;\n\nconst RadioLabel = styled.label`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.9rem;\n  cursor: pointer;\n  color: ${({ theme }) => theme.colors.text.primary};\n`;\n\nconst RadioInput = styled.input`\n  cursor: pointer;\n  accent-color: ${({ theme }) => theme.colors.primary.main};\n`;\n\nconst StyledFormInput = styled(FormInput)`\n  background-color: ${({ theme }) => theme.colors.background.input};\n  color: ${({ theme }) => theme.colors.text.primary};\n  border-color: ${({ theme }) => theme.colors.border};\n\n  &:focus {\n    border-color: ${({ theme }) => theme.colors.primary.main};\n    box-shadow: 0 0 0 2px\n      ${({ theme }) =>\n        theme.mode === \"dark\"\n          ? \"rgba(59, 130, 246, 0.3)\"\n          : \"rgba(59, 130, 246, 0.2)\"};\n  }\n\n  &::placeholder {\n    color: ${({ theme }) => theme.colors.text.placeholder};\n  }\n`;\n\n// Ajouter ce style aprÃ¨s les autres styles\nconst WeekInfo = styled.div`\n  font-size: 0.9rem;\n  color: ${({ theme }) => theme.colors.info.dark};\n  background-color: ${({ theme }) => theme.colors.info.light};\n  padding: 0.75rem;\n  border-radius: 4px;\n  margin-bottom: 1rem;\n  border-left: 3px solid ${({ theme }) => theme.colors.info.main};\n`;\n\n// Fonction utilitaire pour convertir les donnÃ©es existantes au nouveau format\nconst convertToNewFormat = (day) => {\n  // Si le jour a dÃ©jÃ  le format attendu, le retourner tel quel\n  if (day.type) {\n    return { ...day };\n  }\n\n  // Sinon, convertir au nouveau format\n  return {\n    type: day.absence ? \"absence\" : \"work\",\n    hours: day.hours || \"0\",\n    absence: day.absence || \"\",\n    note: day.note || \"\",\n    timeSlots:\n      day.timeSlots ||\n      (day.hours && parseFloat(day.hours) > 0\n        ? [{ start: \"09:00\", end: \"17:00\" }]\n        : []),\n  };\n};\n\n// Fonction utilitaire pour calculer les heures d'un crÃ©neau\nconst calculateDayHours = (timeSlots) => {\n  if (!timeSlots || timeSlots.length === 0) return \"0\";\n\n  let totalHours = 0;\n\n  timeSlots.forEach((slot) => {\n    if (slot.start && slot.end) {\n      const startParts = slot.start.split(\":\").map(Number);\n      const endParts = slot.end.split(\":\").map(Number);\n\n      if (startParts.length === 2 && endParts.length === 2) {\n        const startDate = new Date();\n        startDate.setHours(startParts[0], startParts[1], 0);\n\n        const endDate = new Date();\n        endDate.setHours(endParts[0], endParts[1], 0);\n\n        // Si l'heure de fin est avant l'heure de dÃ©but, on considÃ¨re que c'est le jour suivant\n        if (endDate < startDate) {\n          endDate.setDate(endDate.getDate() + 1);\n        }\n\n        const hours = calculateHours(startDate, endDate);\n        totalHours += hours;\n      }\n    }\n  });\n\n  return totalHours.toFixed(1);\n};\n\nconst EmployeeScheduleForm = ({\n  employee,\n  weekStart,\n  scheduleData,\n  onSave,\n  onCancel,\n}) => {\n  // CrÃ©er un tableau de jours vides\n  const emptyDays = Array(7)\n    .fill()\n    .map(() => ({\n      type: \"work\",\n      hours: \"0\",\n      absence: \"\",\n      note: \"\",\n      timeSlots: [],\n    }));\n\n  // Initialiser les donnÃ©es du formulaire\n  const initialScheduleData = useMemo(() => {\n    // Si scheduleData est un tableau, l'utiliser directement\n    if (Array.isArray(scheduleData)) {\n      return scheduleData;\n    }\n\n    // Si scheduleData est un objet avec une propriÃ©tÃ© days, utiliser days\n    if (scheduleData && scheduleData.days && Array.isArray(scheduleData.days)) {\n      return scheduleData.days;\n    }\n\n    // Sinon, utiliser le tableau de jours vides\n    return emptyDays;\n  }, [scheduleData]);\n\n  const [formData, setFormData] = useState(initialScheduleData);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [errors, setErrors] = useState({});\n\n  const weekDays = getDaysOfWeek(weekStart);\n\n  // VÃ©rifier si un jour est un weekend\n  const isWeekend = useCallback((dayIndex) => {\n    return dayIndex === 5 || dayIndex === 6; // Samedi ou Dimanche\n  }, []);\n\n  // GÃ©rer le changement de type (travail ou absence)\n  const handleTypeChange = useCallback((dayIndex, type) => {\n    setFormData((prevFormData) => {\n      const newFormData = [...prevFormData];\n      newFormData[dayIndex] = {\n        ...newFormData[dayIndex],\n        type: type,\n        // Si on passe en mode absence, on vide les crÃ©neaux horaires\n        timeSlots: type === \"absence\" ? [] : newFormData[dayIndex].timeSlots,\n        // Si on passe en mode travail, on vide le motif d'absence\n        absence: type === \"work\" ? \"\" : newFormData[dayIndex].absence,\n        // Mettre Ã  jour les heures\n        hours:\n          type === \"absence\"\n            ? \"0\"\n            : calculateDayHours(newFormData[dayIndex].timeSlots),\n      };\n      return newFormData;\n    });\n  }, []);\n\n  // GÃ©rer le changement du motif d'absence\n  const handleAbsenceChange = useCallback((dayIndex, value) => {\n    setFormData((prevFormData) => {\n      const newFormData = [...prevFormData];\n      newFormData[dayIndex] = {\n        ...newFormData[dayIndex],\n        absence: value,\n      };\n      return newFormData;\n    });\n  }, []);\n\n  // GÃ©rer le changement de note\n  const handleNoteChange = useCallback((dayIndex, value) => {\n    setFormData((prevFormData) => {\n      const newFormData = [...prevFormData];\n      newFormData[dayIndex] = {\n        ...newFormData[dayIndex],\n        note: value,\n      };\n      return newFormData;\n    });\n  }, []);\n\n  // Ajouter un crÃ©neau horaire\n  const addTimeSlot = useCallback((dayIndex) => {\n    setFormData((prevFormData) => {\n      const newFormData = [...prevFormData];\n      const newTimeSlots = [\n        ...(newFormData[dayIndex].timeSlots || []),\n        { start: \"09:00\", end: \"17:00\" },\n      ];\n\n      newFormData[dayIndex] = {\n        ...newFormData[dayIndex],\n        timeSlots: newTimeSlots,\n        hours: calculateDayHours(newTimeSlots),\n      };\n\n      return newFormData;\n    });\n  }, []);\n\n  // Supprimer un crÃ©neau horaire\n  const removeTimeSlot = useCallback((dayIndex, slotIndex) => {\n    setFormData((prevFormData) => {\n      const newFormData = [...prevFormData];\n      const newTimeSlots = [...newFormData[dayIndex].timeSlots];\n      newTimeSlots.splice(slotIndex, 1);\n\n      newFormData[dayIndex] = {\n        ...newFormData[dayIndex],\n        timeSlots: newTimeSlots,\n        hours: calculateDayHours(newTimeSlots),\n      };\n\n      return newFormData;\n    });\n  }, []);\n\n  // Mettre Ã  jour un crÃ©neau horaire\n  const updateTimeSlot = useCallback((dayIndex, slotIndex, field, value) => {\n    setFormData((prevFormData) => {\n      const newFormData = [...prevFormData];\n      const newTimeSlots = [...newFormData[dayIndex].timeSlots];\n\n      newTimeSlots[slotIndex] = {\n        ...newTimeSlots[slotIndex],\n        [field]: value,\n      };\n\n      newFormData[dayIndex] = {\n        ...newFormData[dayIndex],\n        timeSlots: newTimeSlots,\n        hours: calculateDayHours(newTimeSlots),\n      };\n\n      return newFormData;\n    });\n  }, []);\n\n  // Calculer le total des heures\n  const calculateTotalHours = useCallback(() => {\n    return formData\n      .reduce((total, day) => total + (parseFloat(day.hours) || 0), 0)\n      .toFixed(1);\n  }, [formData]);\n\n  // GÃ©rer la sauvegarde du planning\n  const handleSave = useCallback(() => {\n    // Convertir le format pour la sauvegarde\n    const formattedSchedule = formData.map((day) => ({\n      hours: day.hours,\n      absence: day.absence,\n      note: day.note,\n      timeSlots: day.timeSlots,\n      type: day.type,\n    }));\n\n    const updatedScheduleData = {\n      employeeId: employee.id,\n      weekStart: formatDateForInput(weekStart),\n      days: formattedSchedule,\n    };\n\n    onSave(updatedScheduleData);\n  }, [employee, onSave, formData, weekStart]);\n\n  if (!employee || !weekDays || formData.length === 0) {\n    return null;\n  }\n\n  return (\n    <FormContainer>\n      <FormTitle>\n        <div>\n          Planning du {formatDate(weekStart)} au {formatDate(weekDays[6])}\n        </div>\n        <ButtonGroup>\n          <ActionButton variant=\"outline\" onClick={onCancel}>\n            <FaTimes /> Annuler\n          </ActionButton>\n          <ActionButton\n            variant=\"primary\"\n            onClick={handleSave}\n            disabled={isSubmitting}\n          >\n            <FaSave /> {isSubmitting ? \"Enregistrement...\" : \"Enregistrer\"}\n          </ActionButton>\n        </ButtonGroup>\n      </FormTitle>\n\n      <EmployeeInfo>\n        <EmployeeName>\n          {employee.first_name} {employee.last_name}\n        </EmployeeName>\n        <EmployeeDetails>\n          <div>DÃ©partement: {employee.department || \"Non dÃ©fini\"}</div>\n          <div>Heures contractuelles: {employee.contractHours}h</div>\n        </EmployeeDetails>\n      </EmployeeInfo>\n\n      <WeekInfo>\n        Ce planning est spÃ©cifique Ã  la semaine du {formatDate(weekStart)} au{\" \"}\n        {formatDate(weekDays[6])}. Il n'affectera pas les autres semaines.\n      </WeekInfo>\n\n      <DaysGrid>\n        {weekDays.map((day, index) => (\n          <DayCard key={index} $isWeekend={isWeekend(index)}>\n            <DayHeader>\n              <DayName $isWeekend={isWeekend(index)}>\n                {formatDate(day, \"EEEE\")}\n              </DayName>\n              <DayDate>{formatDate(day, \"dd/MM\")}</DayDate>\n            </DayHeader>\n\n            <RadioGroup>\n              <RadioLabel>\n                <RadioInput\n                  type=\"radio\"\n                  name={`day-type-${index}`}\n                  checked={formData[index]?.type === \"work\"}\n                  onChange={() => handleTypeChange(index, \"work\")}\n                />\n                Travail\n              </RadioLabel>\n              <RadioLabel>\n                <RadioInput\n                  type=\"radio\"\n                  name={`day-type-${index}`}\n                  checked={formData[index]?.type === \"absence\"}\n                  onChange={() => handleTypeChange(index, \"absence\")}\n                />\n                Absence\n              </RadioLabel>\n            </RadioGroup>\n\n            {formData[index]?.type === \"work\" ? (\n              <TimeSlotContainer>\n                <InputLabel>\n                  CrÃ©neaux horaires ({formData[index]?.hours || \"0\"}h)\n                </InputLabel>\n\n                {formData[index]?.timeSlots?.map((slot, slotIndex) => (\n                  <TimeSlot key={slotIndex}>\n                    <TimeInput\n                      type=\"time\"\n                      value={slot.start}\n                      onChange={(e) =>\n                        updateTimeSlot(\n                          index,\n                          slotIndex,\n                          \"start\",\n                          e.target.value\n                        )\n                      }\n                    />\n                    <span>-</span>\n                    <TimeInput\n                      type=\"time\"\n                      value={slot.end}\n                      onChange={(e) =>\n                        updateTimeSlot(index, slotIndex, \"end\", e.target.value)\n                      }\n                    />\n                    <RemoveSlotButton\n                      variant=\"danger\"\n                      onClick={() => removeTimeSlot(index, slotIndex)}\n                    >\n                      Ã—\n                    </RemoveSlotButton>\n                  </TimeSlot>\n                ))}\n\n                <AddSlotButton\n                  variant=\"outline\"\n                  onClick={() => addTimeSlot(index)}\n                >\n                  + Ajouter un crÃ©neau\n                </AddSlotButton>\n              </TimeSlotContainer>\n            ) : (\n              <InputGroup>\n                <InputLabel>Motif d'absence</InputLabel>\n                <StyledFormInput\n                  type=\"text\"\n                  value={formData[index]?.absence || \"\"}\n                  onChange={(e) => handleAbsenceChange(index, e.target.value)}\n                  placeholder=\"Saisir le motif d'absence...\"\n                />\n              </InputGroup>\n            )}\n\n            <InputGroup>\n              <InputLabel>Note (optionnelle)</InputLabel>\n              <StyledFormInput\n                type=\"text\"\n                value={formData[index]?.note || \"\"}\n                onChange={(e) => handleNoteChange(index, e.target.value)}\n                placeholder=\"Ajouter une note...\"\n              />\n            </InputGroup>\n          </DayCard>\n        ))}\n      </DaysGrid>\n\n      <TotalHours>\n        <span>Total des heures:</span>\n        <span>{calculateTotalHours()}h</span>\n      </TotalHours>\n    </FormContainer>\n  );\n};\n\nEmployeeScheduleForm.propTypes = {\n  employee: PropTypes.object.isRequired,\n  weekStart: PropTypes.instanceOf(Date).isRequired,\n  scheduleData: PropTypes.array,\n  onSave: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n};\n\nexport default EmployeeScheduleForm;\n","import { useCallback, useState } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport { HourBalanceService } from \"../services/api\";\n\n/**\n * Hook personnalisÃ© pour gÃ©rer le solde d'heures des employÃ©s\n */\nconst useHourBalance = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  /**\n   * RÃ©cupÃ¨re le solde d'heures d'un employÃ©\n   * @param {number} employeeId - ID de l'employÃ©\n   * @returns {Promise<Object>} - Solde d'heures de l'employÃ©\n   */\n  const getEmployeeBalance = useCallback(async (employeeId) => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const result = await HourBalanceService.getByEmployee(employeeId);\n\n      if (!result.success) {\n        console.warn(\n          `Avertissement: Impossible de rÃ©cupÃ©rer le solde d'heures pour l'employÃ© ${employeeId}:`,\n          result.message\n        );\n        return 0; // Retourner 0 par dÃ©faut au lieu de lancer une erreur\n      }\n\n      return result.balance;\n    } catch (err) {\n      console.warn(\n        `Avertissement: Erreur lors de la rÃ©cupÃ©ration du solde d'heures pour l'employÃ© ${employeeId}:`,\n        err\n      );\n      setError(\n        err.message || \"Erreur lors de la rÃ©cupÃ©ration du solde d'heures\"\n      );\n      // Ne pas afficher de toast d'erreur pour ne pas perturber l'utilisateur\n      return 0; // Retourner 0 par dÃ©faut\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  /**\n   * Met Ã  jour le solde d'heures d'un employÃ©\n   * @param {number} employeeId - ID de l'employÃ©\n   * @param {Object} balanceData - DonnÃ©es du solde d'heures\n   * @returns {Promise<Object>} - RÃ©sultat de la mise Ã  jour\n   */\n  const updateEmployeeBalance = useCallback(async (employeeId, balanceData) => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const result = await HourBalanceService.updateBalance(\n        employeeId,\n        balanceData\n      );\n\n      if (!result.success) {\n        throw new Error(\n          result.message || \"Erreur lors de la mise Ã  jour du solde d'heures\"\n        );\n      }\n\n      toast.success(\"Solde d'heures mis Ã  jour avec succÃ¨s\");\n      return { success: true, balance: result.balance };\n    } catch (err) {\n      console.error(\n        `Erreur lors de la mise Ã  jour du solde d'heures pour l'employÃ© ${employeeId}:`,\n        err\n      );\n      setError(\n        err.message || \"Erreur lors de la mise Ã  jour du solde d'heures\"\n      );\n      toast.error(\"Erreur lors de la mise Ã  jour du solde d'heures\");\n      return { success: false, error: err.message };\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  return {\n    loading,\n    error,\n    getEmployeeBalance,\n    updateEmployeeBalance,\n  };\n};\n\nexport default useHourBalance;\n","/**\n * Utilitaires pour la gestion des plannings\n */\n\n// Importer la fonction formatDateForInput\nimport { formatDateForInput } from \"./dateUtils\";\n\n/**\n * Format standard des donnÃ©es de planning\n *\n * Structure:\n * {\n *   employeeId: number,           // ID de l'employÃ©\n *   days: [                       // Tableau de 7 jours (lundi Ã  dimanche)\n *     {\n *       type: string,             // \"work\" ou \"absence\"\n *       hours: string,            // Nombre d'heures travaillÃ©es (format \"0.0\")\n *       absence: string,          // Type d'absence (congÃ©, maladie, etc.)\n *       note: string,             // Note ou commentaire\n *       timeSlots: [              // CrÃ©neaux horaires\n *         {\n *           start: string,        // Heure de dÃ©but (format \"HH:MM\")\n *           end: string,          // Heure de fin (format \"HH:MM\")\n *           break: string         // DurÃ©e de la pause en heures (optionnel)\n *         }\n *       ]\n *     }\n *   ]\n * }\n */\n\n/**\n * Convertit les anciennes donnÃ©es de planning au format standard\n * @param {Object} schedule - DonnÃ©es de planning Ã  convertir\n * @returns {Object} - DonnÃ©es de planning au format standard\n */\nexport const standardizeScheduleData = (schedule) => {\n  if (!schedule) return null;\n\n  // Si le planning est dÃ©jÃ  au format standard, le retourner tel quel\n  if (\n    schedule.days &&\n    Array.isArray(schedule.days) &&\n    schedule.days.length > 0 &&\n    schedule.days[0].type !== undefined\n  ) {\n    return {\n      ...schedule,\n      // S'assurer que weekStart est prÃ©sent\n      weekStart:\n        schedule.weekStart ||\n        schedule.week_start ||\n        formatDateForInput(new Date()),\n    };\n  }\n\n  // Convertir au format standard\n  return {\n    employeeId: schedule.employeeId || schedule.employee_id,\n    weekStart:\n      schedule.weekStart ||\n      schedule.week_start ||\n      formatDateForInput(new Date()),\n    days: Array.isArray(schedule.days)\n      ? schedule.days.map(convertDayToStandardFormat)\n      : Array(7)\n          .fill()\n          .map(() => createEmptyDay()),\n  };\n};\n\n/**\n * Convertit un jour de planning au format standard\n * @param {Object} day - Jour de planning Ã  convertir\n * @returns {Object} - Jour de planning au format standard\n */\nexport const convertDayToStandardFormat = (day) => {\n  if (!day) return createEmptyDay();\n\n  // Si le jour est dÃ©jÃ  au format standard, le retourner tel quel\n  if (day.type) {\n    return { ...day };\n  }\n\n  // Convertir au format standard\n  return {\n    type: day.absence ? \"absence\" : \"work\",\n    hours: day.hours || \"0\",\n    absence: day.absence || \"\",\n    note: day.note || \"\",\n    timeSlots:\n      day.timeSlots ||\n      (day.hours && parseFloat(day.hours) > 0\n        ? [{ start: \"09:00\", end: \"17:00\" }]\n        : []),\n  };\n};\n\n/**\n * CrÃ©e un jour de planning vide au format standard\n * @returns {Object} - Jour de planning vide\n */\nexport const createEmptyDay = () => ({\n  type: \"work\",\n  hours: \"0\",\n  absence: \"\",\n  note: \"\",\n  timeSlots: [],\n});\n\n/**\n * Calcule le total des heures pour un planning\n * @param {Object} schedule - DonnÃ©es de planning\n * @returns {number} - Total des heures\n */\nexport const calculateTotalHours = (schedule) => {\n  if (!schedule || !schedule.days) return 0;\n\n  return schedule.days.reduce((total, day) => {\n    return total + (parseFloat(day.hours) || 0);\n  }, 0);\n};\n\n/**\n * VÃ©rifie si un employÃ© est absent pour un jour donnÃ©\n * @param {Object} day - Jour de planning\n * @returns {boolean} - True si l'employÃ© est absent\n */\nexport const isAbsent = (day) => {\n  return (\n    day && day.type === \"absence\" && day.absence && day.absence.trim() !== \"\"\n  );\n};\n\n/**\n * PrÃ©pare les donnÃ©es de planning pour l'envoi Ã  l'API\n * @param {Object} schedule - DonnÃ©es de planning au format standard\n * @returns {Object} - DonnÃ©es formatÃ©es pour l'API\n */\nexport const prepareScheduleForApi = (schedule) => {\n  if (!schedule) return null;\n\n  const standardSchedule = standardizeScheduleData(schedule);\n\n  return {\n    employee_id: standardSchedule.employeeId,\n    week_start: standardSchedule.weekStart,\n    schedule_data: JSON.stringify(standardSchedule.days),\n    total_hours: calculateTotalHours(standardSchedule).toFixed(1),\n  };\n};\n\n/**\n * Analyse les donnÃ©es de planning reÃ§ues de l'API\n * @param {Object} apiData - DonnÃ©es reÃ§ues de l'API\n * @returns {Object} - DonnÃ©es de planning au format standard\n */\nexport const parseScheduleFromApi = (apiData) => {\n  if (!apiData) return null;\n\n  let days;\n  try {\n    days =\n      typeof apiData.schedule_data === \"string\"\n        ? JSON.parse(apiData.schedule_data)\n        : apiData.schedule_data;\n  } catch (error) {\n    console.error(\"Erreur lors de l'analyse des donnÃ©es de planning:\", error);\n    days = Array(7)\n      .fill()\n      .map(() => createEmptyDay());\n  }\n\n  return {\n    employeeId: apiData.employee_id,\n    days: Array.isArray(days)\n      ? days.map(convertDayToStandardFormat)\n      : Array(7)\n          .fill()\n          .map(() => createEmptyDay()),\n  };\n};\n\nconst scheduleUtils = {\n  standardizeScheduleData,\n  convertDayToStandardFormat,\n  createEmptyDay,\n  calculateTotalHours,\n  isAbsent,\n  prepareScheduleForApi,\n  parseScheduleFromApi,\n};\n\nexport default scheduleUtils;\n","import DOMPurify from \"dompurify\";\nimport html2canvas from \"html2canvas\";\nimport { jsPDF } from \"jspdf\";\nimport PropTypes from \"prop-types\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport {\n  FaEdit,\n  FaFilePdf,\n  FaSortAmountDown,\n  FaSortAmountUp,\n} from \"react-icons/fa\";\nimport styled, { useTheme } from \"styled-components\";\nimport Button from \"../../components/ui/Button\";\nimport useHourBalance from \"../../hooks/useHourBalance\";\nimport { formatDate, getDayName, getDaysOfWeek } from \"../../utils/dateUtils\";\nimport {\n  calculateTotalHours,\n  isAbsent as isEmployeeAbsent,\n  standardizeScheduleData,\n} from \"../../utils/scheduleUtils\";\n\n// Styles\nconst ScheduleGrid = styled.div`\n  display: grid;\n  grid-template-columns: 250px repeat(7, 1fr) 100px 80px 80px;\n  gap: 1px;\n  background-color: ${({ theme }) => theme.colors.border.light};\n  border-radius: 0.5rem;\n  overflow-x: auto;\n  width: 100%;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),\n    0 2px 4px -1px rgba(0, 0, 0, 0.06);\n  position: relative;\n\n  &::after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n    background-image: linear-gradient(\n        to right,\n        transparent,\n        transparent 99%,\n        ${({ theme }) => theme.colors.border.light} 99%,\n        ${({ theme }) => theme.colors.border.light} 100%\n      ),\n      linear-gradient(\n        to bottom,\n        transparent,\n        transparent 99%,\n        ${({ theme }) => theme.colors.border.light} 99%,\n        ${({ theme }) => theme.colors.border.light} 100%\n      );\n    background-size: 100% 100%;\n    background-position: 0 0;\n    background-repeat: repeat;\n    z-index: 1;\n  }\n\n  @media (max-width: 1200px) {\n    grid-template-columns: 220px repeat(7, 1fr) 100px 80px 80px;\n  }\n\n  @media (max-width: 992px) {\n    grid-template-columns: 180px repeat(7, minmax(80px, 1fr)) 100px 80px 80px;\n  }\n\n  @media (max-width: 768px) {\n    grid-template-columns: 150px repeat(7, minmax(70px, 1fr)) 100px 80px 80px;\n    font-size: 0.85rem;\n  }\n\n  @media (max-width: 576px) {\n    display: block;\n    overflow-x: visible;\n    background-color: transparent;\n    gap: 0;\n  }\n`;\n\nconst GridCell = styled.div`\n  padding: 0.75rem;\n  background-color: ${({ theme }) => theme.colors.background.primary};\n  color: ${({ theme }) => theme.colors.text.primary};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 50px;\n  transition: all 0.3s ease;\n  position: relative;\n  z-index: 2;\n\n  &:hover {\n    transform: translateZ(0);\n    box-shadow: 0 0 0 1px ${({ theme }) => theme.colors.primary.main}40;\n  }\n\n  @media (max-width: 576px) {\n    padding: 0.5rem;\n    min-height: auto;\n  }\n`;\n\nconst HeaderCell = styled(GridCell)`\n  font-weight: 600;\n  background-color: ${({ theme }) => theme.colors.background.secondary};\n  text-align: center;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  cursor: ${(props) => (props.sortable ? \"pointer\" : \"default\")};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 5px;\n\n  &:hover {\n    background-color: ${(props) =>\n      props.sortable\n        ? ({ theme }) => theme.colors.background.tertiary\n        : \"inherit\"};\n  }\n\n  @media (max-width: 576px) {\n    display: none;\n  }\n`;\n\nconst EmployeeCell = styled(GridCell)`\n  justify-content: flex-start;\n  font-weight: 600;\n  position: sticky;\n  left: 0;\n  z-index: 3;\n  box-shadow: 2px 0 5px rgba(0, 0, 0, 0.05);\n  padding: 0.75rem 1rem;\n  min-width: 150px;\n  flex-direction: column;\n  align-items: flex-start;\n`;\n\nconst EmployeeName = styled.div`\n  font-weight: 700;\n  font-size: 1.05rem;\n  margin-bottom: 0.25rem;\n  color: ${({ theme }) => theme.colors.primary.main};\n  display: block;\n  width: 100%;\n  text-align: left;\n`;\n\nconst TotalCell = styled(GridCell)`\n  font-weight: 600;\n  background-color: ${({ theme }) => theme.colors.background.secondary};\n  position: sticky;\n  right: 160px;\n  z-index: 5;\n\n  @media (max-width: 576px) {\n    position: static;\n    border-bottom-left-radius: 0.5rem;\n    border-bottom-right-radius: 0.5rem;\n    margin-bottom: 1rem;\n  }\n`;\n\nconst DayCell = styled(GridCell)`\n  ${({ isWeekend, theme }) =>\n    isWeekend &&\n    `\n    background-color: ${theme.colors.background.tertiary};\n  `}\n\n  ${({ isAbsent }) =>\n    isAbsent &&\n    `\n    color: #ef4444;\n  `}\n  \n  flex-direction: column;\n  gap: 0.25rem;\n  font-size: 0.85rem;\n  text-align: center;\n\n  @media (max-width: 576px) {\n    display: grid;\n    grid-template-columns: 100px 1fr;\n    text-align: left;\n    border-radius: 0;\n    margin: 0;\n\n    &::before {\n      content: attr(data-day);\n      font-weight: 600;\n      color: ${({ theme }) => theme.colors.text.secondary};\n    }\n  }\n`;\n\nconst TimeSlot = styled.div`\n  font-size: 1rem;\n  font-weight: 600;\n  color: ${({ theme }) => theme.colors.text.primary};\n  white-space: nowrap;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst BreakInfo = styled.div`\n  font-size: 0.7rem;\n  color: ${({ theme }) => theme.colors.text.tertiary};\n  font-style: italic;\n`;\n\nconst HoursValue = styled.div`\n  font-size: 0.75rem;\n  color: ${({ theme }) => theme.colors.text.secondary};\n`;\n\nconst AbsenceValue = styled.div`\n  font-size: 1.1rem;\n  font-weight: 700;\n  color: #ef4444;\n`;\n\nconst NoteText = styled.div`\n  font-style: italic;\n  font-size: 0.75rem;\n  color: ${({ theme }) => theme.colors.text.secondary};\n  margin-top: 0.25rem;\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n`;\n\nconst ActionCell = styled(GridCell)`\n  position: sticky;\n  right: 0;\n  z-index: 5;\n  background-color: ${({ theme }) => theme.colors.background.secondary};\n  padding: 0.5rem;\n\n  @media (max-width: 576px) {\n    position: static;\n    padding: 0.5rem;\n  }\n`;\n\nconst ExportCell = styled(GridCell)`\n  position: sticky;\n  right: 80px;\n  z-index: 5;\n  background-color: ${({ theme }) => theme.colors.background.secondary};\n  padding: 0.5rem;\n\n  @media (max-width: 576px) {\n    position: static;\n    padding: 0.5rem;\n  }\n`;\n\nconst EmployeeRow = styled.div`\n  display: contents;\n\n  @media (max-width: 576px) {\n    display: flex;\n    flex-direction: column;\n    border-radius: 0.5rem;\n    overflow: hidden;\n    box-shadow: 0 2px 8px\n      ${({ theme }) =>\n        theme.mode === \"dark\" ? \"rgba(0, 0, 0, 0.3)\" : \"rgba(0, 0, 0, 0.1)\"};\n    margin-bottom: 1.5rem;\n  }\n`;\n\nconst QuickEditButton = styled.button`\n  position: absolute;\n  top: 0.25rem;\n  right: 0.25rem;\n  opacity: 0;\n  padding: 0.25rem;\n  font-size: 0.7rem;\n  background-color: ${({ theme }) => theme.colors.background.secondary};\n  color: ${({ theme }) => theme.colors.text.secondary};\n  border: 1px solid ${({ theme }) => theme.colors.border.main};\n\n  ${DayCell}:hover & {\n    opacity: 1;\n  }\n`;\n\nconst ActionButton = styled(Button)`\n  padding: 0.4rem 0.6rem;\n  font-size: 0.85rem;\n  display: flex;\n  align-items: center;\n  gap: 0.3rem;\n  transition: all 0.2s ease;\n\n  &:hover {\n    transform: translateY(-2px);\n  }\n\n  @media (max-width: 768px) {\n    padding: 0.3rem 0.5rem;\n    font-size: 0.8rem;\n  }\n`;\n\nconst WeeklyScheduleGrid = ({\n  employees,\n  weekStart,\n  scheduleData,\n  onChange,\n  readOnly,\n  onEditEmployee,\n  onGeneratePDF,\n}) => {\n  const theme = useTheme();\n  const { getEmployeeBalance } = useHourBalance();\n\n  // S'assurer que employees est un tableau\n  const employeesArray = Array.isArray(employees) ? employees : [];\n\n  // S'assurer que scheduleData est un tableau\n  const scheduleDataArray = useMemo(() => {\n    return Array.isArray(scheduleData) ? scheduleData : [];\n  }, [scheduleData]);\n\n  // S'assurer que weekStart est une date valide\n  const validWeekStart = useMemo(() => {\n    try {\n      const date = weekStart instanceof Date ? weekStart : new Date(weekStart);\n      return !isNaN(date.getTime()) ? date : new Date();\n    } catch (error) {\n      console.error(\"Date de dÃ©but de semaine invalide:\", weekStart);\n      return new Date();\n    }\n  }, [weekStart]);\n\n  // Ã‰tat pour le tri\n  const [sortConfig, setSortConfig] = useState({\n    key: null,\n    direction: \"ascending\",\n  });\n\n  // Obtenir les jours de la semaine\n  const daysOfWeek = getDaysOfWeek(validWeekStart);\n\n  // Fonction pour trier les employÃ©s\n  const sortedEmployees = [...employeesArray].sort((a, b) => {\n    if (sortConfig.key === null) {\n      return 0;\n    }\n\n    let aValue, bValue;\n\n    if (sortConfig.key === \"name\") {\n      aValue = `${a.lastName} ${a.firstName}`.toLowerCase();\n      bValue = `${b.lastName} ${b.firstName}`.toLowerCase();\n    } else if (sortConfig.key === \"total\") {\n      aValue = parseFloat(calculateEmployeeTotal(a.id));\n      bValue = parseFloat(calculateEmployeeTotal(b.id));\n    } else {\n      aValue = a[sortConfig.key];\n      bValue = b[sortConfig.key];\n    }\n\n    if (aValue < bValue) {\n      return sortConfig.direction === \"ascending\" ? -1 : 1;\n    }\n    if (aValue > bValue) {\n      return sortConfig.direction === \"ascending\" ? 1 : -1;\n    }\n    return 0;\n  });\n\n  // Fonction pour changer le tri\n  const requestSort = useCallback(\n    (key) => {\n      let direction = \"ascending\";\n      if (sortConfig.key === key && sortConfig.direction === \"ascending\") {\n        direction = \"descending\";\n      }\n      setSortConfig({ key, direction });\n    },\n    [sortConfig]\n  );\n\n  // Obtenir l'icÃ´ne de tri\n  const getSortIcon = useCallback(\n    (key) => {\n      if (sortConfig.key !== key) {\n        return null;\n      }\n      return sortConfig.direction === \"ascending\" ? (\n        <FaSortAmountUp size={12} />\n      ) : (\n        <FaSortAmountDown size={12} />\n      );\n    },\n    [sortConfig]\n  );\n\n  // Trouver le planning d'un employÃ©\n  const findEmployeeSchedule = useCallback(\n    (employeeId) => {\n      const schedule = scheduleDataArray.find(\n        (schedule) => schedule.employeeId === employeeId\n      );\n\n      if (!schedule) {\n        return {\n          employeeId,\n          days: Array(7)\n            .fill()\n            .map(() => ({\n              type: \"work\",\n              hours: \"0\",\n              absence: \"\",\n              note: \"\",\n              timeSlots: [],\n            })),\n        };\n      }\n\n      // Standardiser les donnÃ©es\n      return standardizeScheduleData(schedule);\n    },\n    [scheduleDataArray]\n  );\n\n  // GÃ©rer le clic sur le bouton d'Ã©dition\n  const handleEditClick = useCallback(\n    (employeeId) => {\n      if (onEditEmployee) {\n        onEditEmployee(employeeId);\n      }\n    },\n    [onEditEmployee]\n  );\n\n  // VÃ©rifier si un jour est un weekend\n  const isWeekend = useCallback((dayIndex) => {\n    return dayIndex === 5 || dayIndex === 6; // Samedi ou Dimanche\n  }, []);\n\n  // VÃ©rifier si un employÃ© est absent pour un jour donnÃ©\n  const isAbsent = useCallback(\n    (employeeId, dayIndex) => {\n      const schedule = findEmployeeSchedule(employeeId);\n      const day = schedule.days[dayIndex];\n      return isEmployeeAbsent(day);\n    },\n    [findEmployeeSchedule]\n  );\n\n  // Formater l'affichage d'une cellule de jour\n  const formatDayCell = useCallback(\n    (employeeId, dayIndex) => {\n      const schedule = findEmployeeSchedule(employeeId);\n      const day = schedule.days[dayIndex];\n\n      if (!day) return null;\n\n      const hasTimeSlots = day.timeSlots && day.timeSlots.length > 0;\n\n      return (\n        <>\n          {day.type === \"absence\" &&\n          day.absence &&\n          day.absence.trim() !== \"\" ? (\n            <AbsenceValue>{day.absence}</AbsenceValue>\n          ) : hasTimeSlots ? (\n            day.timeSlots.map((slot, index) => (\n              <TimeSlot key={index}>\n                {slot.start} - {slot.end}\n                {slot.break && <BreakInfo>Pause: {slot.break}h</BreakInfo>}\n              </TimeSlot>\n            ))\n          ) : (\n            <TimeSlot>-</TimeSlot>\n          )}\n          <HoursValue>{day.hours || \"0\"}h</HoursValue>\n          {day.note && day.note.trim() !== \"\" && (\n            <NoteText title={day.note}>{day.note}</NoteText>\n          )}\n        </>\n      );\n    },\n    [findEmployeeSchedule]\n  );\n\n  // Calculer le total des heures pour un employÃ©\n  const calculateEmployeeTotal = useCallback(\n    (employeeId) => {\n      const schedule = findEmployeeSchedule(employeeId);\n      return calculateTotalHours(schedule).toFixed(1);\n    },\n    [findEmployeeSchedule]\n  );\n\n  // Obtenir le compteur horaire d'un employÃ© (heures contractuelles vs heures travaillÃ©es)\n  const getEmployeeHoursCounter = useCallback(\n    (employeeId) => {\n      try {\n        const employee = employees.find((emp) => emp.id === employeeId);\n        if (!employee) return \"N/A\";\n\n        // VÃ©rifier si contractHours existe et est un nombre valide\n        const contractHours = employee.contractHours\n          ? parseFloat(employee.contractHours)\n          : null;\n        if (contractHours === null || isNaN(contractHours)) return \"N/A\";\n\n        // Calculer les heures travaillÃ©es\n        const workedHours = parseFloat(calculateEmployeeTotal(employeeId));\n        if (isNaN(workedHours)) return \"N/A\";\n\n        // Utiliser le solde d'heures de l'API si disponible\n        if (employee.hour_balance !== undefined) {\n          const balance = parseFloat(employee.hour_balance);\n          if (!isNaN(balance)) {\n            return balance === 0\n              ? \"0\"\n              : balance > 0\n              ? `+${balance.toFixed(1)}`\n              : balance.toFixed(1);\n          }\n        }\n\n        // Sinon, calculer la diffÃ©rence localement\n        const diff = workedHours - contractHours;\n\n        return diff === 0\n          ? \"0\"\n          : diff > 0\n          ? `+${diff.toFixed(1)}`\n          : diff.toFixed(1);\n      } catch (error) {\n        console.error(\"Erreur lors du calcul du solde d'heures:\", error);\n        return \"N/A\";\n      }\n    },\n    [employees, calculateEmployeeTotal]\n  );\n\n  // Charger le solde d'heures pour chaque employÃ©\n  useEffect(() => {\n    const loadHourBalances = async () => {\n      try {\n        for (const employee of employees) {\n          if (employee && employee.id) {\n            try {\n              const balance = await getEmployeeBalance(employee.id);\n              if (balance !== null) {\n                // Mettre Ã  jour l'employÃ© avec le solde d'heures\n                employee.hour_balance = balance;\n              }\n            } catch (error) {\n              console.warn(\n                `Avertissement: Impossible de rÃ©cupÃ©rer le solde d'heures pour l'employÃ© ${employee.id}:`,\n                error\n              );\n              // Continuer avec les autres employÃ©s mÃªme si une erreur se produit\n            }\n          }\n        }\n      } catch (error) {\n        console.warn(\n          \"Avertissement lors du chargement des soldes d'heures:\",\n          error\n        );\n        // Ne pas afficher de toast d'erreur pour ne pas perturber l'utilisateur\n      }\n    };\n\n    loadHourBalances();\n  }, [employees, getEmployeeBalance]);\n\n  // Fonction pour gÃ©nÃ©rer un PDF du planning d'un employÃ©\n  const generatePDF = (employee, days, weekStart) => {\n    // VÃ©rifier si weekStart est valide\n    if (!weekStart || isNaN(new Date(weekStart).getTime())) {\n      console.error(\n        \"Date de dÃ©but de semaine invalide pour le PDF:\",\n        weekStart\n      );\n      toast.error(\"Impossible de gÃ©nÃ©rer le PDF: date invalide\");\n      return;\n    }\n\n    // CrÃ©er un Ã©lÃ©ment temporaire pour le rendu\n    const tempElement = document.createElement(\"div\");\n    tempElement.style.position = \"absolute\";\n    tempElement.style.left = \"-9999px\";\n    tempElement.style.top = \"-9999px\";\n    tempElement.style.width = \"1000px\"; // Plus large pour le format paysage\n\n    // Formater les dates\n    const weekStartDate = new Date(weekStart);\n    const weekEndDate = new Date(weekStart);\n    weekEndDate.setDate(weekEndDate.getDate() + 6);\n\n    const formattedWeekStart = formatDate(weekStartDate);\n    const formattedWeekEnd = formatDate(weekEndDate);\n\n    // RÃ©cupÃ©rer le prÃ©nom et le nom en tenant compte des diffÃ©rentes structures possibles\n    const firstName = employee.firstName || employee.first_name || \"Inconnu\";\n    const lastName = employee.lastName || employee.last_name || \"Inconnu\";\n\n    // Calculer le total des heures\n    const totalHours = days.reduce((sum, day) => {\n      return sum + (day.isAbsent ? 0 : parseFloat(day.hours || 0));\n    }, 0);\n\n    // CrÃ©er le contenu HTML\n    const content = `\n      <div style=\"font-family: Arial, sans-serif; padding: 20px; color: #333; text-align: center;\">\n        <h2 style=\"text-align: center; color: #2563eb;\">Planning Hebdomadaire</h2>\n        <h3 style=\"text-align: center; margin-bottom: 10px;\">Du ${formattedWeekStart} au ${formattedWeekEnd}</h3>\n        \n        <div style=\"margin-bottom: 20px; text-align: center;\">\n          <h2 style=\"margin-bottom: 5px; color: #2563eb; font-size: 24px; font-weight: bold;\">${firstName} ${lastName}</h2>\n          <p style=\"margin: 5px 0;\">Poste: ${employee.role || \"Inconnu\"}</p>\n          <p style=\"margin: 5px 0;\">DÃ©partement: ${\n            employee.department || \"Inconnu\"\n          }</p>\n          <p style=\"margin: 5px 0;\">Heures contractuelles: ${\n            employee.contractHours || \"0\"\n          }h</p>\n          <p style=\"margin: 5px 0;\">Total heures planifiÃ©es: ${totalHours.toFixed(\n            1\n          )}h</p>\n        </div>\n        \n        <table style=\"width: 100%; border-collapse: collapse; margin: 0 auto; max-width: 900px;\">\n          <thead>\n            <tr style=\"background-color: #e5e7eb;\">\n              <th style=\"padding: 10px; border: 1px solid #d1d5db; text-align: left;\">Jour</th>\n              <th style=\"padding: 10px; border: 1px solid #d1d5db; text-align: left;\">Heures</th>\n              <th style=\"padding: 10px; border: 1px solid #d1d5db; text-align: left;\">CrÃ©neaux</th>\n              <th style=\"padding: 10px; border: 1px solid #d1d5db; text-align: left;\">Notes</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${days\n              .map((day, index) => {\n                const dayDate = new Date(weekStart);\n                dayDate.setDate(dayDate.getDate() + index);\n                const isWeekendDay = isWeekend(dayDate);\n\n                return `\n              <tr style=\"background-color: ${\n                isWeekendDay ? \"#f9fafb\" : \"white\"\n              };\">\n                <td style=\"padding: 10px; border: 1px solid #d1d5db; font-weight: ${\n                  isWeekendDay ? \"bold\" : \"normal\"\n                };\">\n                  ${getDayName(dayDate)} ${formatDate(dayDate, \"dd/MM\")}\n                </td>\n                <td style=\"padding: 10px; border: 1px solid #d1d5db;\">\n                  ${\n                    day.isAbsent\n                      ? `<span style=\"color: #ef4444; font-weight: bold;\">${\n                          day.absenceReason || \"Absent\"\n                        }</span>`\n                      : `${day.hours}h`\n                  }\n                </td>\n                <td style=\"padding: 10px; border: 1px solid #d1d5db;\">\n                  ${\n                    day.isAbsent\n                      ? \"-\"\n                      : (day.timeSlots || [])\n                          .map((slot) => `${slot.start} - ${slot.end}`)\n                          .join(\"<br>\")\n                  }\n                </td>\n                <td style=\"padding: 10px; border: 1px solid #d1d5db; font-style: italic;\">\n                  ${day.notes ? DOMPurify.sanitize(day.notes) : \"\"}\n                </td>\n              </tr>\n              `;\n              })\n              .join(\"\")}\n          </tbody>\n        </table>\n      </div>\n    `;\n\n    // Ajouter le contenu Ã  l'Ã©lÃ©ment temporaire\n    tempElement.innerHTML = DOMPurify.sanitize(content);\n    document.body.appendChild(tempElement);\n\n    // GÃ©nÃ©rer le PDF\n    html2canvas(tempElement, {\n      scale: 1,\n      useCORS: true,\n      logging: false,\n    }).then((canvas) => {\n      const imgData = canvas.toDataURL(\"image/png\");\n      const pdf = new jsPDF(\"l\", \"mm\", \"a4\"); // Format paysage\n      const pdfWidth = pdf.internal.pageSize.getWidth();\n      const ratio = canvas.width / canvas.height;\n      const imgWidth = pdfWidth;\n      const imgHeight = imgWidth / ratio;\n\n      pdf.addImage(imgData, \"PNG\", 0, 0, imgWidth, imgHeight);\n      pdf.save(`Planning_${firstName}_${lastName}_${formattedWeekStart}.pdf`);\n\n      // Nettoyer\n      document.body.removeChild(tempElement);\n    });\n  };\n\n  const handleGeneratePDF = (employee) => {\n    if (onGeneratePDF) {\n      onGeneratePDF(employee);\n      return;\n    }\n\n    // VÃ©rifier si weekStart est une date valide\n    if (!validWeekStart) {\n      console.error(\"Date de dÃ©but de semaine invalide\");\n      toast.error(\"Impossible de gÃ©nÃ©rer le PDF : date invalide\");\n      return;\n    }\n\n    const employeeSchedule = scheduleDataArray.find(\n      (schedule) => schedule.employeeId === employee.id\n    );\n\n    if (employeeSchedule) {\n      // Convertir les jours au format attendu par generatePDF\n      const formattedDays = employeeSchedule.days.map((day) => {\n        return {\n          isAbsent:\n            day.type === \"absence\" && day.absence && day.absence.trim() !== \"\",\n          absenceReason: day.absence || \"\",\n          hours: day.hours || \"0\",\n          timeSlots: day.timeSlots || [],\n          notes: day.note || \"\",\n        };\n      });\n\n      generatePDF(employee, formattedDays, validWeekStart);\n    } else {\n      // CrÃ©er un planning vide si aucun n'existe\n      const emptyDays = Array(7)\n        .fill()\n        .map(() => ({\n          isAbsent: false,\n          absenceReason: \"\",\n          hours: \"0\",\n          timeSlots: [],\n          notes: \"\",\n        }));\n      generatePDF(employee, emptyDays, validWeekStart);\n    }\n  };\n\n  // Fonction pour formater la cellule d'employÃ©\n  const formatEmployeeCell = useCallback((employee) => {\n    // RÃ©cupÃ©rer le prÃ©nom et le nom en tenant compte des diffÃ©rentes structures possibles\n    const firstName = employee.firstName || employee.first_name || \"\";\n    const lastName = employee.lastName || employee.last_name || \"\";\n\n    // VÃ©rifiez si les noms sont dÃ©finis\n    if (!firstName || !lastName) {\n      console.error(\"Nom ou prÃ©nom manquant pour l'employÃ©:\", employee);\n    }\n\n    return (\n      <EmployeeName>\n        {firstName} {lastName}\n      </EmployeeName>\n    );\n  }, []);\n\n  return (\n    <ScheduleGrid>\n      {/* En-tÃªte avec les jours de la semaine */}\n      <HeaderCell sortable onClick={() => requestSort(\"name\")}>\n        EmployÃ© {getSortIcon(\"name\")}\n      </HeaderCell>\n      {daysOfWeek.map((day, index) => (\n        <HeaderCell key={index}>{formatDate(day, \"EEE dd/MM\")}</HeaderCell>\n      ))}\n      <HeaderCell sortable onClick={() => requestSort(\"total\")}>\n        Total {getSortIcon(\"total\")}\n      </HeaderCell>\n      <HeaderCell>Export</HeaderCell>\n      <HeaderCell>Actions</HeaderCell>\n\n      {/* Lignes pour chaque employÃ© */}\n      {sortedEmployees.map((employee) => {\n        return (\n          <EmployeeRow key={employee.id}>\n            <EmployeeCell>{formatEmployeeCell(employee)}</EmployeeCell>\n\n            {/* Cellules pour chaque jour */}\n            {Array(7)\n              .fill()\n              .map((_, dayIndex) => (\n                <DayCell\n                  key={dayIndex}\n                  isWeekend={isWeekend(dayIndex)}\n                  isAbsent={isAbsent(employee.id, dayIndex)}\n                  data-day={formatDate(daysOfWeek[dayIndex], \"EEEE\")}\n                  onClick={() => !readOnly && onEditEmployee(employee.id)}\n                >\n                  {formatDayCell(employee.id, dayIndex)}\n                  {!readOnly && (\n                    <QuickEditButton\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        onEditEmployee(employee.id);\n                      }}\n                    >\n                      <FaEdit />\n                    </QuickEditButton>\n                  )}\n                </DayCell>\n              ))}\n\n            {/* Cellule de total */}\n            <TotalCell>\n              {calculateEmployeeTotal(employee.id)}h\n              <br />\n              <small\n                style={{\n                  color: getEmployeeHoursCounter(employee.id).startsWith(\"+\")\n                    ? theme.colors.success.main\n                    : getEmployeeHoursCounter(employee.id).startsWith(\"-\")\n                    ? theme.colors.error.main\n                    : \"inherit\",\n                }}\n              >\n                {getEmployeeHoursCounter(employee.id)}\n              </small>\n            </TotalCell>\n\n            {/* Cellule d'export */}\n            <ExportCell>\n              <ActionButton\n                variant=\"secondary\"\n                onClick={() => handleGeneratePDF(employee)}\n              >\n                <FaFilePdf /> PDF\n              </ActionButton>\n            </ExportCell>\n\n            {/* Cellule d'action */}\n            <ActionCell>\n              <ActionButton\n                variant=\"primary\"\n                onClick={() => handleEditClick(employee.id)}\n              >\n                <FaEdit /> Modifier\n              </ActionButton>\n            </ActionCell>\n          </EmployeeRow>\n        );\n      })}\n    </ScheduleGrid>\n  );\n};\n\nWeeklyScheduleGrid.propTypes = {\n  employees: PropTypes.array,\n  weekStart: PropTypes.instanceOf(Date).isRequired,\n  scheduleData: PropTypes.array,\n  onChange: PropTypes.func,\n  readOnly: PropTypes.bool,\n  onEditEmployee: PropTypes.func,\n  onGeneratePDF: PropTypes.func,\n};\n\nWeeklyScheduleGrid.defaultProps = {\n  employees: [],\n  scheduleData: [],\n  onChange: () => {},\n  readOnly: false,\n  onEditEmployee: null,\n  onGeneratePDF: null,\n};\n\nexport default WeeklyScheduleGrid;\n","import PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\n\nconst HeaderContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 1px solid ${({ theme }) => theme.colors.border || \"#e0e0e0\"};\n`;\n\nconst Title = styled.h1`\n  font-size: 1.75rem;\n  font-weight: 600;\n  margin: 0;\n  color: ${({ theme }) => theme.colors.text?.primary || \"#333\"};\n`;\n\nconst Description = styled.p`\n  margin: 0.5rem 0 0 0;\n  color: ${({ theme }) => theme.colors.text?.secondary || \"#666\"};\n  font-size: 0.875rem;\n`;\n\nconst ActionsContainer = styled.div`\n  display: flex;\n  gap: 0.75rem;\n`;\n\n/**\n * Composant d'en-tÃªte de page avec titre, description et actions\n */\nconst PageHeader = ({ title, description, actions, children }) => {\n  return (\n    <HeaderContainer>\n      <div>\n        <Title>{title}</Title>\n        {description && <Description>{description}</Description>}\n        {children}\n      </div>\n      {actions && <ActionsContainer>{actions}</ActionsContainer>}\n    </HeaderContainer>\n  );\n};\n\nPageHeader.propTypes = {\n  title: PropTypes.string.isRequired,\n  description: PropTypes.string,\n  actions: PropTypes.node,\n  children: PropTypes.node,\n};\n\nexport default PageHeader;\n","import PropTypes from \"prop-types\";\nimport styled, { keyframes } from \"styled-components\";\n\n// Animation de rotation\nconst rotate = keyframes`\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n`;\n\n// Conteneur du spinner\nconst SpinnerContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: ${({ $center }) => ($center ? \"center\" : \"flex-start\")};\n  height: ${({ $center }) => ($center ? \"100%\" : \"auto\")};\n  width: 100%;\n  padding: 1rem;\n`;\n\n// Ã‰lÃ©ment du spinner\nconst SpinnerElement = styled.div`\n  width: ${({ $size }) => {\n    switch ($size) {\n      case \"small\":\n        return \"1.5rem\";\n      case \"large\":\n        return \"3rem\";\n      default:\n        return \"2rem\";\n    }\n  }};\n  height: ${({ $size }) => {\n    switch ($size) {\n      case \"small\":\n        return \"1.5rem\";\n      case \"large\":\n        return \"3rem\";\n      default:\n        return \"2rem\";\n    }\n  }};\n  border: ${({ $size }) => {\n      switch ($size) {\n        case \"small\":\n          return \"2px\";\n        case \"large\":\n          return \"4px\";\n        default:\n          return \"3px\";\n      }\n    }}\n    solid rgba(0, 0, 0, 0.1);\n  border-top: ${({ $size, theme }) => {\n    const borderWidth =\n      $size === \"small\" ? \"2px\" : $size === \"large\" ? \"4px\" : \"3px\";\n    return `${borderWidth} solid ${theme.colors.primary.main}`;\n  }};\n  border-radius: 50%;\n  animation: ${rotate} 1s linear infinite;\n`;\n\n// Texte du spinner\nconst SpinnerText = styled.p`\n  margin-top: 0.5rem;\n  color: ${({ theme }) => theme.colors.text.secondary};\n  font-size: 0.875rem;\n`;\n\n/**\n * Composant Spinner pour indiquer un chargement\n */\nconst Spinner = ({ $center, $size, text }) => {\n  return (\n    <SpinnerContainer $center={$center}>\n      <SpinnerElement $size={$size} />\n      {text && <SpinnerText>{text}</SpinnerText>}\n    </SpinnerContainer>\n  );\n};\n\nSpinner.propTypes = {\n  $center: PropTypes.bool,\n  $size: PropTypes.oneOf([\"small\", \"medium\", \"large\"]),\n  text: PropTypes.string,\n};\n\nSpinner.defaultProps = {\n  $center: false,\n  $size: \"medium\",\n  text: \"\",\n};\n\nexport default Spinner;\n","import { useCallback, useEffect, useState } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport { WeeklyScheduleService } from \"../services/api\";\nimport {\n  parseScheduleFromApi,\n  prepareScheduleForApi,\n  standardizeScheduleData,\n} from \"../utils/scheduleUtils\";\nimport useWebSocket from \"./useWebSocket\";\n\n/**\n * Hook personnalisÃ© pour gÃ©rer les plannings hebdomadaires\n */\nconst useWeeklySchedules = () => {\n  const [schedules, setSchedules] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // IntÃ©gration WebSocket pour les mises Ã  jour en temps rÃ©el\n  const { socket, isConnected, notifyDataChange } = useWebSocket();\n\n  // Ã‰couter les mises Ã  jour WebSocket\n  useEffect(() => {\n    if (socket && isConnected) {\n      // Fonction pour traiter les messages WebSocket\n      const handleWebSocketMessage = (event) => {\n        try {\n          const data = JSON.parse(event.data);\n\n          // Si le message concerne une mise Ã  jour de planning\n          if (data.type === \"SCHEDULE_UPDATED\" && data.schedule) {\n            setSchedules((prevSchedules) => {\n              // VÃ©rifier si le planning existe dÃ©jÃ \n              const exists = prevSchedules.some(\n                (schedule) => schedule.id === data.schedule.id\n              );\n\n              if (exists) {\n                // Mettre Ã  jour le planning existant\n                return prevSchedules.map((schedule) =>\n                  schedule.id === data.schedule.id\n                    ? parseScheduleFromApi(data.schedule)\n                    : schedule\n                );\n              } else {\n                // Ajouter le nouveau planning\n                return [...prevSchedules, parseScheduleFromApi(data.schedule)];\n              }\n            });\n\n            toast.info(\"Planning mis Ã  jour en temps rÃ©el\");\n          }\n\n          // Si le message concerne une suppression de planning\n          if (data.type === \"SCHEDULE_DELETED\" && data.scheduleId) {\n            setSchedules((prevSchedules) =>\n              prevSchedules.filter(\n                (schedule) => schedule.id !== data.scheduleId\n              )\n            );\n\n            toast.info(\"Planning supprimÃ© en temps rÃ©el\");\n          }\n        } catch (error) {\n          console.error(\n            \"Erreur lors du traitement du message WebSocket:\",\n            error\n          );\n        }\n      };\n\n      // Ajouter l'Ã©couteur d'Ã©vÃ©nements\n      socket.addEventListener(\"message\", handleWebSocketMessage);\n\n      // Nettoyer l'Ã©couteur lors du dÃ©montage\n      return () => {\n        socket.removeEventListener(\"message\", handleWebSocketMessage);\n      };\n    }\n  }, [socket, isConnected]);\n\n  /**\n   * RÃ©cupÃ¨re tous les plannings pour une semaine donnÃ©e\n   * @param {string} weekStart - Date de dÃ©but de semaine (format YYYY-MM-DD)\n   * @returns {Promise<Array>} - Liste des plannings\n   */\n  const fetchSchedules = useCallback(async (weekStart) => {\n    setLoading(true);\n    setError(null);\n\n    try {\n\n      const result = await WeeklyScheduleService.getByWeek(weekStart);\n\n      if (!result.success) {\n        throw new Error(\n          result.message || \"Erreur lors du chargement des horaires\"\n        );\n      }\n\n      // Standardiser les donnÃ©es\n      const standardizedSchedules = result.schedules.map((schedule) =>\n        parseScheduleFromApi(schedule)\n      );\n\n      setSchedules(standardizedSchedules);\n      return standardizedSchedules;\n    } catch (err) {\n      console.error(\"Erreur lors du chargement des horaires:\", err);\n      setError(\n        \"Erreur lors du chargement des horaires: \" +\n          (err.message || \"Erreur inconnue\")\n      );\n      toast.error(\"Erreur lors du chargement des horaires\");\n      return [];\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  /**\n   * CrÃ©e un nouveau planning\n   * @param {Object} scheduleData - DonnÃ©es du planning\n   * @returns {Promise<Object>} - RÃ©sultat de la crÃ©ation\n   */\n  const createSchedule = useCallback(\n    async (scheduleData) => {\n      setLoading(true);\n      try {\n        // Standardiser et prÃ©parer les donnÃ©es pour l'API\n        const apiData = prepareScheduleForApi(\n          standardizeScheduleData(scheduleData)\n        );\n\n\n        const result = await WeeklyScheduleService.create(apiData);\n\n        if (!result.success) {\n          throw new Error(\n            result.message || \"Erreur lors de la crÃ©ation de l'horaire\"\n          );\n        }\n\n        // Ajouter le nouveau planning Ã  la liste\n        const newSchedule = parseScheduleFromApi(result.schedule);\n        setSchedules((prev) => [...prev, newSchedule]);\n\n        // Notifier les autres clients via WebSocket\n        notifyDataChange(\"schedule\", \"create\", newSchedule.id);\n\n        toast.success(\"Planning crÃ©Ã© avec succÃ¨s\");\n        return { success: true, schedule: newSchedule };\n      } catch (error) {\n        console.error(\"Erreur lors de la crÃ©ation du planning:\", error);\n        toast.error(error.message || \"Erreur lors de la crÃ©ation du planning\");\n        return { success: false, error: error.message };\n      }\n    },\n    [notifyDataChange]\n  );\n\n  /**\n   * Met Ã  jour un planning existant\n   * @param {number} id - ID du planning\n   * @param {Object} scheduleData - DonnÃ©es du planning\n   * @returns {Promise<Object>} - RÃ©sultat de la mise Ã  jour\n   */\n  const updateSchedule = useCallback(\n    async (id, scheduleData) => {\n      setLoading(true);\n      try {\n        // Standardiser et prÃ©parer les donnÃ©es pour l'API\n        const apiData = prepareScheduleForApi(\n          standardizeScheduleData(scheduleData)\n        );\n\n\n        const result = await WeeklyScheduleService.update(id, apiData);\n\n        if (!result.success) {\n          throw new Error(\n            result.message || \"Erreur lors de la mise Ã  jour de l'horaire\"\n          );\n        }\n\n        // Mettre Ã  jour le planning dans la liste\n        const updatedSchedule = parseScheduleFromApi(result.schedule);\n        setSchedules((prev) =>\n          prev.map((schedule) =>\n            schedule.id === id ? updatedSchedule : schedule\n          )\n        );\n\n        // Notifier les autres clients via WebSocket\n        notifyDataChange(\"schedule\", \"update\", id);\n\n        toast.success(\"Planning mis Ã  jour avec succÃ¨s\");\n        return { success: true, schedule: updatedSchedule };\n      } catch (error) {\n        console.error(\"Erreur lors de la mise Ã  jour du planning:\", error);\n        toast.error(\n          error.message || \"Erreur lors de la mise Ã  jour du planning\"\n        );\n        return { success: false, error: error.message };\n      }\n    },\n    [notifyDataChange]\n  );\n\n  /**\n   * Supprime un planning\n   * @param {number} id - ID du planning\n   * @returns {Promise<Object>} - RÃ©sultat de la suppression\n   */\n  const deleteSchedule = useCallback(\n    async (id) => {\n      setLoading(true);\n      try {\n\n        const result = await WeeklyScheduleService.delete(id);\n\n        if (!result.success) {\n          throw new Error(\n            result.message || \"Erreur lors de la suppression de l'horaire\"\n          );\n        }\n\n        // Supprimer le planning de la liste\n        setSchedules((prev) => prev.filter((schedule) => schedule.id !== id));\n\n        // Notifier les autres clients via WebSocket\n        notifyDataChange(\"schedule\", \"delete\", id);\n\n        toast.success(\"Planning supprimÃ© avec succÃ¨s\");\n        return { success: true };\n      } catch (error) {\n        console.error(\"Erreur lors de la suppression du planning:\", error);\n        toast.error(\n          error.message || \"Erreur lors de la suppression du planning\"\n        );\n        return { success: false, error: error.message };\n      }\n    },\n    [notifyDataChange]\n  );\n\n  return {\n    schedules,\n    loading,\n    error,\n    fetchSchedules,\n    createSchedule,\n    updateSchedule,\n    deleteSchedule,\n  };\n};\n\nexport default useWeeklySchedules;\n","import DOMPurify from \"dompurify\";\nimport html2canvas from \"html2canvas\";\nimport { jsPDF } from \"jspdf\";\nimport \"jspdf-autotable\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport {\n  FaArrowLeft,\n  FaArrowRight,\n  FaCalendarDay,\n  FaFilePdf,\n  FaUsers,\n} from \"react-icons/fa\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport thinkingAnimation from \"../assets/animations/thinking.json\";\nimport EmployeeScheduleForm from \"../components/schedule/EmployeeScheduleForm\";\nimport WeeklyScheduleGrid from \"../components/schedule/WeeklyScheduleGrid\";\nimport Button from \"../components/ui/Button\";\nimport Card, { CardContent, CardHeader } from \"../components/ui/Card\";\nimport { FormInput, FormSelect } from \"../components/ui/Form\";\nimport PageHeader from \"../components/ui/PageHeader\";\nimport Spinner from \"../components/ui/Spinner\";\nimport useEmployees from \"../hooks/useEmployees\";\nimport useWeeklySchedules from \"../hooks/useWeeklySchedules\";\nimport { WeeklyScheduleService } from \"../services/api\";\nimport {\n  addWeeks,\n  formatDate,\n  formatDateForInput,\n  getDayName,\n  getDaysOfWeek,\n  getWeekEnd,\n  getWeekStart,\n  isWeekend,\n} from \"../utils/dateUtils\";\nimport { standardizeScheduleData } from \"../utils/scheduleUtils\";\n\n// Importer react-lottie avec require pour Ã©viter les problÃ¨mes de compatibilitÃ©\nconst Lottie = require(\"react-lottie\").default;\n\n// Styles\nconst ScheduleContainer = styled.div`\n  padding: 1rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n\n  @media (min-width: 768px) {\n    padding: 2rem;\n    gap: 2rem;\n  }\n`;\n\nconst ScheduleHeader = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  margin-bottom: 0.5rem;\n\n  @media (min-width: 768px) {\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1rem;\n  }\n`;\n\nconst ScheduleFilters = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  margin-bottom: 0.75rem;\n\n  @media (min-width: 768px) {\n    flex-direction: row;\n    gap: 1rem;\n    margin-bottom: 1rem;\n  }\n`;\n\nconst WeekNavigation = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  margin-bottom: 0.75rem;\n\n  @media (min-width: 768px) {\n    flex-direction: row;\n    align-items: center;\n    gap: 1rem;\n    margin-bottom: 1rem;\n  }\n`;\n\nconst WeekActions = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n`;\n\nconst ActionButton = styled(Button)`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  transition: all 0.2s ease;\n\n  &:hover {\n    transform: translateY(-2px);\n  }\n`;\n\nconst ExportAllButton = styled(ActionButton)`\n  margin-left: auto;\n\n  @media (max-width: 768px) {\n    margin-left: 0;\n    width: 100%;\n    margin-top: 0.5rem;\n  }\n`;\n\nconst FilterContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  width: 100%;\n\n  @media (min-width: 768px) {\n    min-width: 200px;\n    width: auto;\n  }\n`;\n\n/* Composants styled non utilisÃ©s - commentÃ©s pour Ã©viter les erreurs ESLint\nconst SummaryContainer = styled.div`\n  margin-top: 1rem;\n  padding: 1rem;\n  background-color: #f9fafb;\n  border-radius: 0.5rem;\n`;\n\nconst SummaryTitle = styled.h3`\n  font-size: 1rem;\n  margin-bottom: 0.5rem;\n`;\n\nconst SummaryItem = styled.div`\n  display: flex;\n  justify-content: space-between;\n  padding: 0.5rem 0;\n  border-bottom: 1px solid #e5e7eb;\n\n  &:last-child {\n    border-bottom: none;\n  }\n`;\n\nconst SummaryLabel = styled.span`\n  font-weight: 500;\n`;\n\nconst SummaryValue = styled.span`\n  font-weight: 600;\n  color: ${(props) => (props.isNegative ? \"#ef4444\" : \"#10b981\")};\n`;\n*/\n\nconst FilterSelect = styled(FormSelect)`\n  width: 100%;\n\n  @media (min-width: 768px) {\n    min-width: 200px;\n    width: auto;\n  }\n`;\n\n/* Composant styled non utilisÃ© - commentÃ© pour Ã©viter les erreurs ESLint\nconst CurrentWeek = styled.div`\n  font-size: 1.1rem;\n  font-weight: 600;\n  text-align: center;\n  width: 100%;\n`;\n*/\n\nconst SearchContainer = styled.div`\n  margin-bottom: 1rem;\n  width: 100%;\n`;\n\nconst EmployeeSearchInput = styled(FormInput)`\n  width: 100%;\n`;\n\nconst NoResultsMessage = styled.div`\n  text-align: center;\n  padding: 2rem;\n  color: ${({ theme }) => theme.colors.text.secondary};\n  font-style: italic;\n`;\n\n/* Composant styled non utilisÃ© - commentÃ© pour Ã©viter les erreurs ESLint\nconst ResponsiveButton = styled(Button)`\n  font-size: 0.85rem;\n  padding: 0.5rem 0.75rem;\n\n  @media (min-width: 768px) {\n    font-size: 1rem;\n    padding: 0.5rem 1rem;\n  }\n`;\n*/\n\nconst PlanningTitle = styled.h2`\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: ${({ theme }) => theme.colors.text.primary};\n  margin: 0;\n`;\n\nconst HeaderLeft = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 1.5rem;\n`;\n\nconst AnimationContainer = styled.div`\n  width: 80px;\n  height: 80px;\n  flex-shrink: 0;\n`;\n\nconst TitleContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst PageTitle = styled.h1`\n  font-size: 2rem;\n  color: ${({ theme }) => theme.colors.text.primary};\n  margin-bottom: 0.5rem;\n`;\n\nconst PageDescription = styled.p`\n  color: ${({ theme }) => theme.colors.text.secondary};\n  font-size: 1.1rem;\n`;\n\nconst ExportOptions = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  padding: 1rem;\n  background-color: ${({ theme }) => theme.colors.background.secondary};\n  border-radius: 0.5rem;\n  margin-top: 1rem;\n`;\n\nconst ExportOptionsTitle = styled.h4`\n  font-size: 1rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst ExportOptionsGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 1rem;\n`;\n\nconst ExportOptionCard = styled.div`\n  padding: 1rem;\n  background-color: ${({ theme }) => theme.colors.background.primary};\n  border-radius: 0.5rem;\n  border: 1px solid ${({ theme }) => theme.colors.border.main};\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  transition: all 0.2s ease;\n  cursor: pointer;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),\n      0 2px 4px -1px rgba(0, 0, 0, 0.06);\n  }\n`;\n\nconst ExportOptionTitle = styled.h5`\n  font-size: 0.9rem;\n  font-weight: 600;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst ExportOptionDescription = styled.p`\n  font-size: 0.8rem;\n  color: ${({ theme }) => theme.colors.text.secondary};\n  margin: 0;\n`;\n\n// Ajouter ce style aprÃ¨s les autres styles\nconst InfoMessage = styled.div`\n  background-color: ${({ theme }) => theme.colors.info.light};\n  color: ${({ theme }) => theme.colors.info.dark};\n  border-left: 4px solid ${({ theme }) => theme.colors.info.main};\n  padding: 0.75rem 1rem;\n  margin-bottom: 1.5rem;\n  border-radius: 4px;\n  font-size: 0.9rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\n/**\n * Page de gestion des plannings hebdomadaires\n */\nconst WeeklySchedulePage = () => {\n  const navigate = useNavigate();\n  const { weekStart: weekStartParam } = useParams();\n\n  // RÃ©fÃ©rences pour Ã©viter les boucles infinies\n  const prevScheduleDataRef = useRef(null);\n  const prevFormattedScheduleDataRef = useRef(null);\n\n  // Ã‰tats pour la gestion des plannings\n  const [currentWeekStart, setCurrentWeekStart] = useState(() => {\n    try {\n      // Essayer de crÃ©er une date Ã  partir de weekStartParam\n      if (weekStartParam) {\n        const date = new Date(weekStartParam);\n        // VÃ©rifier si la date est valide\n        if (!isNaN(date.getTime())) {\n          return date;\n        }\n      }\n      // Si weekStartParam est invalide ou non fourni, utiliser la date actuelle\n      return getWeekStart(new Date());\n    } catch (error) {\n      console.error(\n        \"Erreur lors de l'initialisation de currentWeekStart:\",\n        error\n      );\n      return getWeekStart(new Date());\n    }\n  });\n  const [scheduleData, setScheduleData] = useState([]);\n  const [editingEmployeeId, setEditingEmployeeId] = useState(null);\n  const [selectedDepartment, setSelectedDepartment] = useState(\"\");\n  const [selectedRole, setSelectedRole] = useState(\"\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [showExportOptions, setShowExportOptions] = useState(false);\n\n  // Formater la date de dÃ©but de semaine pour l'API\n  const formattedWeekStart = useMemo(\n    () => formatDateForInput(currentWeekStart),\n    [currentWeekStart]\n  );\n\n  // RÃ©cupÃ©rer les employÃ©s\n  const {\n    employees,\n    loading: employeesLoading,\n    // eslint-disable-next-line no-unused-vars\n    error: employeesError,\n  } = useEmployees();\n\n  // RÃ©cupÃ©rer les plannings\n  const {\n    schedules,\n    loading: schedulesLoading,\n    error: schedulesError,\n    fetchSchedules,\n    createSchedule,\n    updateSchedule,\n  } = useWeeklySchedules();\n\n  // Formater les donnÃ©es de planning pour le composant WeeklyScheduleGrid\n  const formattedScheduleData = useMemo(() => {\n    if (!schedules || !Array.isArray(schedules)) {\n      console.warn(\"DonnÃ©es de plannings invalides:\", schedules);\n      return [];\n    }\n\n    // Log pour dÃ©bogage\n\n    // Standardiser les donnÃ©es de planning (incluant la conversion JSON si nÃ©cessaire)\n    // La fonction standardizeScheduleData s'assure que les donnÃ©es JSON sont correctement parsÃ©es\n    return schedules.map((schedule) => {\n      try {\n        const standardized = standardizeScheduleData(schedule);\n        return standardized;\n      } catch (error) {\n        console.error(\n          `Erreur lors de la standardisation du planning pour l'employÃ© ${schedule.employee_id}:`,\n          error\n        );\n        // Retourner un planning vide en cas d'erreur\n        return {\n          employeeId: schedule.employee_id,\n          days: Array(7)\n            .fill()\n            .map(() => ({\n              type: \"work\",\n              hours: \"0\",\n              absence: \"\",\n              note: \"\",\n              timeSlots: [],\n            })),\n        };\n      }\n    });\n  }, [schedules]);\n\n  // Mettre Ã  jour les donnÃ©es de planning lorsque les plannings changent\n  useEffect(() => {\n    // VÃ©rifier si les donnÃ©es ont changÃ© pour Ã©viter les boucles infinies\n    const currentScheduleDataStr = JSON.stringify(scheduleData);\n    const currentFormattedScheduleDataStr = JSON.stringify(\n      formattedScheduleData\n    );\n\n    if (\n      prevFormattedScheduleDataRef.current !==\n        currentFormattedScheduleDataStr &&\n      prevScheduleDataRef.current !== currentScheduleDataStr\n    ) {\n      prevFormattedScheduleDataRef.current = currentFormattedScheduleDataStr;\n      prevScheduleDataRef.current = currentScheduleDataStr;\n\n      setScheduleData(formattedScheduleData);\n    }\n  }, [formattedScheduleData, scheduleData]);\n\n  // Charger les plannings lorsque la semaine change\n  useEffect(() => {\n    fetchSchedules(formattedWeekStart)\n      .then((data) => {\n        // Mettre Ã  jour l'Ã©tat local avec les plannings rÃ©cupÃ©rÃ©s\n        setScheduleData(data); // Assurez-vous que 'data' contient les plannings\n      })\n      .catch((error) => {\n        console.error(\"Erreur lors de la rÃ©cupÃ©ration des plannings:\", error);\n      });\n  }, [fetchSchedules, formattedWeekStart]);\n\n  // GÃ©rer les erreurs de chargement des plannings\n  useEffect(() => {\n    if (schedulesError) {\n      console.error(\"Erreur de chargement des plannings:\", schedulesError);\n      toast.error(`Erreur lors du chargement des plannings: ${schedulesError}`);\n    }\n  }, [schedulesError]);\n\n  // Obtenir l'employÃ© en cours d'Ã©dition\n  const editingEmployee = useMemo(() => {\n    if (!editingEmployeeId || !employees) return null;\n    return employees.find((emp) => emp.id === editingEmployeeId) || null;\n  }, [editingEmployeeId, employees]);\n\n  // Extraire les dÃ©partements uniques\n  const uniqueDepartments = useMemo(() => {\n    if (!employees || !Array.isArray(employees)) return [];\n    const departments = [...new Set(employees.map((emp) => emp.department))];\n    return departments.filter((dept) => dept && dept.trim() !== \"\");\n  }, [employees]);\n\n  // Extraire les rÃ´les uniques\n  const uniqueRoles = useMemo(() => {\n    if (!employees || !Array.isArray(employees)) return [];\n    const roles = [...new Set(employees.map((emp) => emp.role))];\n    return roles.filter((role) => role && role.trim() !== \"\");\n  }, [employees]);\n\n  // Mettre Ã  jour l'URL lorsque la semaine change\n  useEffect(() => {\n    const formattedDate = formatDateForInput(currentWeekStart);\n    navigate(`/weekly-schedule/${formattedDate}`, { replace: true });\n  }, [currentWeekStart, navigate]);\n\n  // Filtrer les employÃ©s en fonction des critÃ¨res\n  const filteredEmployees = useMemo(() => {\n    if (!employees) return [];\n\n    let filtered = Array.isArray(employees) ? [...employees] : [];\n\n    // Filtrer par dÃ©partement si sÃ©lectionnÃ©\n    if (selectedDepartment) {\n      filtered = filtered.filter(\n        (emp) => emp.department === selectedDepartment\n      );\n    }\n\n    // Filtrer par rÃ´le si sÃ©lectionnÃ©\n    if (selectedRole) {\n      filtered = filtered.filter((emp) => emp.role === selectedRole);\n    }\n\n    // Filtrer par recherche si saisie\n    if (searchQuery) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter(\n        (emp) =>\n          emp.firstName.toLowerCase().includes(query) ||\n          emp.lastName.toLowerCase().includes(query) ||\n          (emp.email && emp.email.toLowerCase().includes(query))\n      );\n    }\n\n    return filtered;\n  }, [employees, selectedDepartment, selectedRole, searchQuery]);\n\n  // Fonctions de navigation entre les semaines\n  const goToPreviousWeek = useCallback(() => {\n    setCurrentWeekStart((prev) => addWeeks(prev, -1));\n  }, []);\n\n  const goToNextWeek = useCallback(() => {\n    setCurrentWeekStart((prev) => addWeeks(prev, 1));\n  }, []);\n\n  const goToCurrentWeek = useCallback(() => {\n    setCurrentWeekStart(getWeekStart(new Date()));\n  }, []);\n\n  // Fonction pour gÃ©rer l'Ã©dition d'un employÃ©\n  const handleEditEmployee = useCallback((employeeId) => {\n    setEditingEmployeeId(employeeId);\n  }, []);\n\n  // Fonction pour annuler l'Ã©dition\n  const handleCancelEdit = useCallback(() => {\n    setEditingEmployeeId(null);\n  }, []);\n\n  // Fonction pour gÃ©rer la recherche\n  const handleSearchChange = useCallback((e) => {\n    setSearchQuery(e.target.value);\n  }, []);\n\n  // Fonction pour gÃ©rer le changement de dÃ©partement\n  const handleDepartmentChange = useCallback((e) => {\n    setSelectedDepartment(e.target.value);\n  }, []);\n\n  // Fonction pour gÃ©rer le changement de rÃ´le\n  const handleRoleChange = useCallback((e) => {\n    setSelectedRole(e.target.value);\n  }, []);\n\n  // Fonction pour gÃ©rer le changement de planning\n  const handleScheduleChange = useCallback(\n    async (updatedScheduleData) => {\n      try {\n        // S'assurer que la date de dÃ©but de semaine est correctement dÃ©finie\n        if (!updatedScheduleData.weekStart) {\n          updatedScheduleData.weekStart = formattedWeekStart;\n        }\n\n        // Si les donnÃ©es mises Ã  jour concernent un seul employÃ©\n        if (updatedScheduleData.employeeId) {\n          // VÃ©rifier si un planning existe dÃ©jÃ  pour cet employÃ© et cette semaine spÃ©cifique\n          // en utilisant le service getByEmployeeAndWeek\n          const existingScheduleResult =\n            await WeeklyScheduleService.getByEmployeeAndWeek(\n              updatedScheduleData.employeeId,\n              updatedScheduleData.weekStart\n            );\n\n          let result;\n\n          if (\n            existingScheduleResult.success &&\n            existingScheduleResult.schedule\n          ) {\n            // Mettre Ã  jour le planning existant dans la base de donnÃ©es\n            result = await updateSchedule(\n              existingScheduleResult.schedule.id,\n              updatedScheduleData\n            );\n          } else {\n            // CrÃ©er un nouveau planning dans la base de donnÃ©es\n            result = await createSchedule(updatedScheduleData);\n          }\n\n          if (result.success) {\n            // Mettre Ã  jour l'Ã©tat local\n            setScheduleData((prevData) => {\n              const existingIndex = prevData.findIndex(\n                (s) => s.employeeId === updatedScheduleData.employeeId\n              );\n\n              const newData = [...prevData];\n\n              if (existingIndex >= 0) {\n                // Mettre Ã  jour le planning existant\n                newData[existingIndex] = {\n                  ...updatedScheduleData,\n                  id: result.schedule.id, // Ajouter l'ID retournÃ© par l'API\n                };\n              } else {\n                // Ajouter un nouveau planning\n                newData.push({\n                  ...updatedScheduleData,\n                  id: result.schedule.id, // Ajouter l'ID retournÃ© par l'API\n                });\n              }\n\n              return newData;\n            });\n\n            // Fermer le formulaire d'Ã©dition\n            setEditingEmployeeId(null);\n\n            // Afficher un message de succÃ¨s\n            toast.success(\n              \"Planning enregistrÃ© avec succÃ¨s dans la base de donnÃ©es\"\n            );\n          } else {\n            // Afficher un message d'erreur\n            toast.error(\n              result.error || \"Erreur lors de l'enregistrement du planning\"\n            );\n          }\n        } else {\n          // Si c'est un tableau complet de plannings, remplacer tout\n          setScheduleData(updatedScheduleData);\n        }\n      } catch (error) {\n        console.error(\"Erreur lors de l'enregistrement du planning:\", error);\n        toast.error(\"Erreur lors de l'enregistrement du planning\");\n      }\n    },\n    [updateSchedule, createSchedule, formattedWeekStart]\n  );\n\n  // Fonction pour gÃ©nÃ©rer un PDF global de tous les employÃ©s\n  const generateAllEmployeesPDF = () => {\n    // Filtrer les employÃ©s actifs (non absents toute la semaine)\n    const activeEmployees = filteredEmployees.filter((employee) => {\n      const employeeSchedule = scheduleData.find(\n        (s) => s.employeeId === employee.id\n      );\n      if (!employeeSchedule) return true; // Inclure les employÃ©s sans planning\n\n      // VÃ©rifier si l'employÃ© est absent toute la semaine\n      const isAbsentAllWeek = employeeSchedule.days.every(\n        (day) =>\n          day.type === \"absence\" && day.absence && day.absence.trim() !== \"\"\n      );\n      return !isAbsentAllWeek;\n    });\n\n    if (activeEmployees.length === 0) {\n      toast.info(\"Aucun employÃ© actif trouvÃ© pour cette semaine\");\n      return;\n    }\n\n    // CrÃ©er un Ã©lÃ©ment temporaire pour le rendu\n    const tempElement = document.createElement(\"div\");\n    tempElement.style.position = \"absolute\";\n    tempElement.style.left = \"-9999px\";\n    tempElement.style.top = \"-9999px\";\n    tempElement.style.width = \"1200px\"; // Plus large pour le format paysage\n\n    // Formater les dates\n    const weekStartDate = new Date(currentWeekStart);\n    const weekEndDate = new Date(currentWeekStart);\n    weekEndDate.setDate(weekEndDate.getDate() + 6);\n\n    const formattedWeekStart = formatDate(weekStartDate);\n    const formattedWeekEnd = formatDate(weekEndDate);\n\n    // CrÃ©er le contenu HTML\n    const content = `\n      <div style=\"font-family: Arial, sans-serif; padding: 20px; color: #333;\">\n        <h2 style=\"text-align: center; color: #2563eb;\">Planning Hebdomadaire Global</h2>\n        <h3 style=\"text-align: center; margin-bottom: 20px;\">Du ${formattedWeekStart} au ${formattedWeekEnd}</h3>\n        \n        <div style=\"margin-bottom: 20px;\">\n          <p style=\"margin: 5px 0;\">DÃ©partement: ${\n            selectedDepartment || \"Tous\"\n          }</p>\n          <p style=\"margin: 5px 0;\">Nombre d'employÃ©s: ${\n            activeEmployees.length\n          }</p>\n        </div>\n        \n        <table style=\"width: 100%; border-collapse: collapse; margin-top: 20px;\">\n          <thead>\n            <tr style=\"background-color: #e5e7eb;\">\n              <th style=\"padding: 10px; border: 1px solid #d1d5db; text-align: left;\">EmployÃ©</th>\n              ${getDaysOfWeek(currentWeekStart)\n                .map(\n                  (day) => `\n                <th style=\"padding: 10px; border: 1px solid #d1d5db; text-align: center; ${\n                  isWeekend(day) ? \"background-color: #f3f4f6;\" : \"\"\n                }\">\n                  ${getDayName(day, true)} ${formatDate(day, \"dd/MM\")}\n                </th>\n              `\n                )\n                .join(\"\")}\n              <th style=\"padding: 10px; border: 1px solid #d1d5db; text-align: center; background-color: #e5e7eb;\">Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${activeEmployees\n              .map((employee) => {\n                const employeeSchedule = scheduleData.find(\n                  (s) => s.employeeId === employee.id\n                );\n                const totalHours = employeeSchedule\n                  ? employeeSchedule.days.reduce(\n                      (sum, day) =>\n                        sum +\n                        (day.type === \"absence\"\n                          ? 0\n                          : parseFloat(day.hours || 0)),\n                      0\n                    )\n                  : 0;\n\n                return `\n                <tr>\n                  <td style=\"padding: 10px; border: 1px solid #d1d5db; text-align: left;\">\n                    <strong>${\n                      employee.firstName || employee.first_name || \"Inconnu\"\n                    } ${\n                  employee.lastName || employee.last_name || \"Inconnu\"\n                }</strong><br>\n                    <small>${employee.role || \"Inconnu\"}</small>\n                  </td>\n                  ${getDaysOfWeek(currentWeekStart)\n                    .map((dayDate, index) => {\n                      const isWeekendDay = isWeekend(dayDate);\n\n                      // RÃ©cupÃ©rer les donnÃ©es du jour pour cet employÃ©\n                      const dayData = employeeSchedule\n                        ? employeeSchedule.days[index]\n                        : null;\n\n                      // DÃ©terminer le contenu de la cellule\n                      let cellContent = \"-\";\n                      if (dayData) {\n                        if (\n                          dayData.type === \"absence\" &&\n                          dayData.absence &&\n                          dayData.absence.trim() !== \"\"\n                        ) {\n                          cellContent = `<span style=\"color: #ef4444;\">${\n                            dayData.absence || \"Absent\"\n                          }</span>`;\n                        } else if (\n                          dayData.timeSlots &&\n                          dayData.timeSlots.length > 0\n                        ) {\n                          cellContent = dayData.timeSlots\n                            .map((slot) => `${slot.start}-${slot.end}`)\n                            .join(\"<br>\");\n\n                          // Ajouter les heures si disponibles\n                          if (dayData.hours) {\n                            cellContent += `<br><small>${dayData.hours}h</small>`;\n                          }\n                        } else if (dayData.hours) {\n                          cellContent = `${dayData.hours}h`;\n                        }\n                      }\n\n                      return `\n                      <td style=\"padding: 8px; border: 1px solid #d1d5db; text-align: center; ${\n                        isWeekendDay ? \"background-color: #f9fafb;\" : \"\"\n                      }\">\n                        ${cellContent}\n                      </td>\n                    `;\n                    })\n                    .join(\"\")}\n                  <td style=\"padding: 10px; border: 1px solid #d1d5db; text-align: center; font-weight: bold;\">\n                    ${totalHours.toFixed(1)}h\n                  </td>\n                </tr>\n              `;\n              })\n              .join(\"\")}\n          </tbody>\n        </table>\n      </div>\n    `;\n\n    // Ajouter le contenu Ã  l'Ã©lÃ©ment temporaire\n    tempElement.innerHTML = DOMPurify.sanitize(content);\n    document.body.appendChild(tempElement);\n\n    // GÃ©nÃ©rer le PDF\n    html2canvas(tempElement, {\n      scale: 1,\n      useCORS: true,\n      logging: false,\n    }).then((canvas) => {\n      const imgData = canvas.toDataURL(\"image/png\");\n      const pdf = new jsPDF(\"l\", \"mm\", \"a4\"); // Format paysage\n      const pdfWidth = pdf.internal.pageSize.getWidth();\n      const ratio = canvas.width / canvas.height;\n      const imgWidth = pdfWidth;\n      const imgHeight = imgWidth / ratio;\n\n      pdf.addImage(imgData, \"PNG\", 0, 0, imgWidth, imgHeight);\n      pdf.save(\n        `Planning_Global_${formatDate(currentWeekStart, \"yyyy-MM-dd\")}.pdf`\n      );\n\n      // Nettoyer\n      document.body.removeChild(tempElement);\n    });\n  };\n\n  // Fonction pour gÃ©nÃ©rer un PDF par dÃ©partement\n  const generateDepartmentPDF = (department) => {\n    // Filtrer les employÃ©s du dÃ©partement\n    const departmentEmployees = filteredEmployees.filter(\n      (emp) => emp.department === department\n    );\n\n    if (departmentEmployees.length === 0) {\n      toast.info(`Aucun employÃ© trouvÃ© dans le dÃ©partement ${department}`);\n      return;\n    }\n\n    // CrÃ©er un Ã©lÃ©ment temporaire pour le rendu\n    const tempElement = document.createElement(\"div\");\n    tempElement.style.position = \"absolute\";\n    tempElement.style.left = \"-9999px\";\n    tempElement.style.top = \"-9999px\";\n    tempElement.style.width = \"1200px\"; // Plus large pour le format paysage\n\n    // Formater les dates\n    const weekStartDate = new Date(currentWeekStart);\n    const weekEndDate = new Date(currentWeekStart);\n    weekEndDate.setDate(weekEndDate.getDate() + 6);\n\n    const formattedWeekStart = formatDate(weekStartDate);\n    const formattedWeekEnd = formatDate(weekEndDate);\n\n    // CrÃ©er le contenu HTML\n    const content = `\n      <div style=\"font-family: Arial, sans-serif; padding: 20px; color: #333;\">\n        <h2 style=\"text-align: center; color: #2563eb;\">Planning Hebdomadaire - ${department}</h2>\n        <h3 style=\"text-align: center; margin-bottom: 20px;\">Du ${formattedWeekStart} au ${formattedWeekEnd}</h3>\n        \n        <div style=\"margin-bottom: 20px;\">\n          <p style=\"margin: 5px 0;\">DÃ©partement: ${department}</p>\n          <p style=\"margin: 5px 0;\">Nombre d'employÃ©s: ${\n            departmentEmployees.length\n          }</p>\n        </div>\n        \n        <table style=\"width: 100%; border-collapse: collapse; margin-top: 20px;\">\n          <thead>\n            <tr style=\"background-color: #e5e7eb;\">\n              <th style=\"padding: 10px; border: 1px solid #d1d5db; text-align: left;\">EmployÃ©</th>\n              ${getDaysOfWeek(currentWeekStart)\n                .map(\n                  (day) => `\n                <th style=\"padding: 10px; border: 1px solid #d1d5db; text-align: center; ${\n                  isWeekend(day) ? \"background-color: #f3f4f6;\" : \"\"\n                }\">\n                  ${getDayName(day, true)} ${formatDate(day, \"dd/MM\")}\n                </th>\n              `\n                )\n                .join(\"\")}\n              <th style=\"padding: 10px; border: 1px solid #d1d5db; text-align: center; background-color: #e5e7eb;\">Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${departmentEmployees\n              .map((employee) => {\n                const employeeSchedule = scheduleData.find(\n                  (s) => s.employeeId === employee.id\n                );\n                const days = employeeSchedule\n                  ? employeeSchedule.days.map((day) => ({\n                      isAbsent:\n                        day.type === \"absence\" &&\n                        day.absence &&\n                        day.absence.trim() !== \"\",\n                      absenceReason: day.absence || \"\",\n                      hours: day.hours || \"0\",\n                      timeSlots: day.timeSlots || [],\n                      notes: day.note || \"\",\n                    }))\n                  : Array(7)\n                      .fill()\n                      .map(() => ({\n                        isAbsent: false,\n                        absenceReason: \"\",\n                        hours: \"0\",\n                        timeSlots: [],\n                        notes: \"\",\n                      }));\n\n                // Calculer le total des heures\n                const totalHours = days.reduce((sum, day) => {\n                  return sum + (day.isAbsent ? 0 : parseFloat(day.hours || 0));\n                }, 0);\n\n                // DÃ©terminer la couleur du total (rouge si < heures contractuelles, vert si >=)\n                const totalColor =\n                  totalHours < employee.contractHours ? \"#ef4444\" : \"#10b981\";\n\n                return `\n                <tr>\n                  <td style=\"padding: 10px; border: 1px solid #d1d5db; font-weight: bold;\">\n                    ${employee.firstName || employee.first_name || \"Inconnu\"} ${\n                  employee.lastName || employee.last_name || \"Inconnu\"\n                }<br>\n                    <span style=\"font-weight: normal; font-size: 0.9em;\">${\n                      employee.role\n                    }</span>\n                  </td>\n                  ${days\n                    .map((day, index) => {\n                      const dayDate = new Date(currentWeekStart);\n                      dayDate.setDate(dayDate.getDate() + index);\n                      const isWeekendDay = isWeekend(dayDate);\n\n                      return `\n                      <td style=\"padding: 8px; border: 1px solid #d1d5db; text-align: center; ${\n                        isWeekendDay ? \"background-color: #f9fafb;\" : \"\"\n                      }\">\n                        ${\n                          day.isAbsent\n                            ? `<span style=\"color: #ef4444; font-weight: bold;\">${\n                                day.absenceReason || \"Absent\"\n                              }</span>`\n                            : `\n                            <div style=\"font-weight: bold; font-size: 1.2em;\">${(\n                              day.timeSlots || []\n                            )\n                              .map((slot) => `${slot.start}-${slot.end}`)\n                              .join(\"<br>\")}</div>\n                            <div style=\"font-size: 0.8em; margin-top: 3px;\">${\n                              day.hours\n                            }h</div>\n                            ${\n                              day.notes\n                                ? `<div style=\"font-style: italic; font-size: 0.8em; color: #6b7280;\">${DOMPurify.sanitize(\n                                    day.notes\n                                  )}</div>`\n                                : \"\"\n                            }\n                          `\n                        }\n                      </td>\n                    `;\n                    })\n                    .join(\"\")}\n                  <td style=\"padding: 10px; border: 1px solid #d1d5db; text-align: center; font-weight: bold; color: ${totalColor};\">\n                    ${totalHours.toFixed(1)}h<br>\n                    <span style=\"font-size: 0.8em; font-weight: normal;\">(${\n                      employee.contractHours\n                    }h)</span>\n                  </td>\n                </tr>\n              `;\n              })\n              .join(\"\")}\n          </tbody>\n        </table>\n      </div>\n    `;\n\n    // Ajouter le contenu Ã  l'Ã©lÃ©ment temporaire\n    tempElement.innerHTML = DOMPurify.sanitize(content);\n    document.body.appendChild(tempElement);\n\n    // GÃ©nÃ©rer le PDF\n    html2canvas(tempElement, {\n      scale: 1,\n      useCORS: true,\n      logging: false,\n    }).then((canvas) => {\n      const imgData = canvas.toDataURL(\"image/png\");\n      const pdf = new jsPDF(\"l\", \"mm\", \"a4\"); // Format paysage\n      const pdfWidth = pdf.internal.pageSize.getWidth();\n      const ratio = canvas.width / canvas.height;\n      const imgWidth = pdfWidth;\n      const imgHeight = imgWidth / ratio;\n\n      pdf.addImage(imgData, \"PNG\", 0, 0, imgWidth, imgHeight);\n      pdf.save(\n        `Planning_${department}_${formatDate(\n          currentWeekStart,\n          \"yyyy-MM-dd\"\n        )}.pdf`\n      );\n\n      // Nettoyer\n      document.body.removeChild(tempElement);\n\n      toast.success(\n        `Planning du dÃ©partement ${department} exportÃ© avec succÃ¨s`\n      );\n    });\n  };\n\n  // Fonction pour gÃ©nÃ©rer un PDF pour un employÃ© spÃ©cifique\n  const generateEmployeePDF = (employee) => {\n    if (!employee) {\n      toast.error(\"EmployÃ© non trouvÃ©\");\n      return;\n    }\n\n    // Trouver le planning de l'employÃ©\n    const employeeSchedule = scheduleData.find(\n      (s) => s.employeeId === employee.id\n    );\n\n    if (!employeeSchedule) {\n      toast.info(\n        `Aucun planning trouvÃ© pour ${\n          employee.firstName || employee.first_name || \"Inconnu\"\n        } ${employee.lastName || employee.last_name || \"Inconnu\"}`\n      );\n      return;\n    }\n\n    // Convertir les jours au format attendu\n    const formattedDays = employeeSchedule.days.map((day) => {\n      return {\n        isAbsent:\n          day.type === \"absence\" && day.absence && day.absence.trim() !== \"\",\n        absenceReason: day.absence || \"\",\n        hours: day.hours || \"0\",\n        timeSlots: day.timeSlots || [],\n        notes: day.note || \"\",\n      };\n    });\n\n    // CrÃ©er un Ã©lÃ©ment temporaire pour le rendu\n    const tempElement = document.createElement(\"div\");\n    tempElement.style.position = \"absolute\";\n    tempElement.style.left = \"-9999px\";\n    tempElement.style.top = \"-9999px\";\n    tempElement.style.width = \"1000px\"; // Plus large pour le format paysage\n\n    // Formater les dates\n    const weekStartDate = new Date(currentWeekStart);\n    const weekEndDate = new Date(currentWeekStart);\n    weekEndDate.setDate(weekEndDate.getDate() + 6);\n\n    const formattedWeekStart = formatDate(weekStartDate);\n    const formattedWeekEnd = formatDate(weekEndDate);\n\n    // Calculer le total des heures\n    const totalHours = formattedDays.reduce((sum, day) => {\n      return sum + (day.isAbsent ? 0 : parseFloat(day.hours || 0));\n    }, 0);\n\n    // CrÃ©er le contenu HTML\n    const content = `\n      <div style=\"font-family: Arial, sans-serif; padding: 20px; color: #333; text-align: center;\">\n        <h2 style=\"text-align: center; color: #2563eb;\">Planning Hebdomadaire</h2>\n        <h3 style=\"text-align: center; margin-bottom: 10px;\">Du ${formattedWeekStart} au ${formattedWeekEnd}</h3>\n        \n        <div style=\"margin-bottom: 20px; text-align: center;\">\n          <h2 style=\"margin-bottom: 5px; color: #2563eb; font-size: 24px; font-weight: bold;\">${\n            employee.firstName || employee.first_name || \"Inconnu\"\n          } ${employee.lastName || employee.last_name || \"Inconnu\"}</h2>\n          <p style=\"margin: 5px 0;\">Poste: ${employee.role}</p>\n          <p style=\"margin: 5px 0;\">DÃ©partement: ${employee.department}</p>\n          <p style=\"margin: 5px 0;\">Heures contractuelles: ${\n            employee.contractHours\n          }h</p>\n          <p style=\"margin: 5px 0;\">Total heures planifiÃ©es: ${totalHours.toFixed(\n            1\n          )}h</p>\n        </div>\n        \n        <table style=\"width: 100%; border-collapse: collapse; margin: 0 auto; max-width: 900px;\">\n          <thead>\n            <tr style=\"background-color: #e5e7eb;\">\n              <th style=\"padding: 10px; border: 1px solid #d1d5db; text-align: left;\">Jour</th>\n              <th style=\"padding: 10px; border: 1px solid #d1d5db; text-align: left;\">Heures</th>\n              <th style=\"padding: 10px; border: 1px solid #d1d5db; text-align: left;\">CrÃ©neaux</th>\n              <th style=\"padding: 10px; border: 1px solid #d1d5db; text-align: left;\">Notes</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${formattedDays\n              .map((day, index) => {\n                const dayDate = new Date(currentWeekStart);\n                dayDate.setDate(dayDate.getDate() + index);\n                const isWeekendDay = isWeekend(dayDate);\n\n                return `\n                <tr style=\"background-color: ${\n                  isWeekendDay ? \"#f9fafb\" : \"white\"\n                };\">\n                  <td style=\"padding: 10px; border: 1px solid #d1d5db; font-weight: ${\n                    isWeekendDay ? \"bold\" : \"normal\"\n                  };\">\n                    ${getDayName(dayDate)} ${formatDate(dayDate, \"dd/MM\")}\n                  </td>\n                  <td style=\"padding: 10px; border: 1px solid #d1d5db;\">\n                    ${\n                      day.isAbsent\n                        ? `<span style=\"color: #ef4444; font-weight: bold;\">${\n                            day.absenceReason || \"Absent\"\n                          }</span>`\n                        : `${day.hours}h`\n                    }\n                  </td>\n                  <td style=\"padding: 10px; border: 1px solid #d1d5db;\">\n                    ${\n                      day.isAbsent\n                        ? \"-\"\n                        : (day.timeSlots || [])\n                            .map((slot) => `${slot.start} - ${slot.end}`)\n                            .join(\"<br>\")\n                    }\n                  </td>\n                  <td style=\"padding: 10px; border: 1px solid #d1d5db; font-style: italic;\">\n                    ${day.notes || \"-\"}\n                  </td>\n                </tr>\n              `;\n              })\n              .join(\"\")}\n          </tbody>\n        </table>\n      </div>\n    `;\n\n    // Ajouter le contenu Ã  l'Ã©lÃ©ment temporaire\n    tempElement.innerHTML = DOMPurify.sanitize(content);\n    document.body.appendChild(tempElement);\n\n    // GÃ©nÃ©rer le PDF\n    html2canvas(tempElement, {\n      scale: 1,\n      useCORS: true,\n      logging: false,\n    }).then((canvas) => {\n      const imgData = canvas.toDataURL(\"image/png\");\n      const pdf = new jsPDF(\"l\", \"mm\", \"a4\"); // Format paysage\n      const pdfWidth = pdf.internal.pageSize.getWidth();\n      const ratio = canvas.width / canvas.height;\n      const imgWidth = pdfWidth;\n      const imgHeight = imgWidth / ratio;\n\n      pdf.addImage(imgData, \"PNG\", 0, 0, imgWidth, imgHeight);\n      pdf.save(\n        `Planning_${employee.firstName || employee.first_name || \"Inconnu\"}_${\n          employee.lastName || employee.last_name || \"Inconnu\"\n        }_${formatDate(currentWeekStart, \"yyyy-MM-dd\")}.pdf`\n      );\n\n      // Nettoyer\n      document.body.removeChild(tempElement);\n\n      toast.success(\n        `Planning de ${\n          employee.firstName || employee.first_name || \"Inconnu\"\n        } ${\n          employee.lastName || employee.last_name || \"Inconnu\"\n        } exportÃ© avec succÃ¨s`\n      );\n    });\n  };\n\n  // Ajouter la fonction de gestion de crÃ©ation\n  // eslint-disable-next-line no-unused-vars\n  const handleCreateSchedule = async (formData) => {\n    try {\n      // S'assurer que la date de dÃ©but de semaine est correctement dÃ©finie\n      if (!formData.weekStart) {\n        formData.weekStart = formattedWeekStart;\n      }\n\n      const result = await createSchedule(formData);\n      if (result.success) {\n        await fetchSchedules(formData.weekStart);\n        toast.success(\n          \"Planning crÃ©Ã© avec succÃ¨s pour la semaine du \" +\n            formatDate(new Date(formData.weekStart))\n        );\n      } else {\n        toast.error(result.error || \"Erreur lors de la crÃ©ation du planning\");\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la crÃ©ation du planning:\", error);\n      toast.error(\"Erreur lors de la crÃ©ation du planning\");\n    }\n  };\n\n  // Afficher un spinner pendant le chargement\n  if (employeesLoading || schedulesLoading) {\n    return (\n      <Spinner $center={true} $size=\"large\" text=\"Chargement du planning...\" />\n    );\n  }\n\n  return (\n    <div>\n      <PageHeader title=\"Planning Hebdomadaire\" />\n\n      <ScheduleContainer>\n        <ScheduleHeader>\n          <HeaderLeft>\n            <AnimationContainer>\n              <Lottie\n                options={{\n                  loop: true,\n                  autoplay: true,\n                  animationData: thinkingAnimation,\n                  rendererSettings: {\n                    preserveAspectRatio: \"xMidYMid slice\",\n                  },\n                }}\n                height={80}\n                width={80}\n              />\n            </AnimationContainer>\n            <TitleContainer>\n              <PageTitle>Planning Hebdomadaire</PageTitle>\n              <PageDescription>\n                GÃ©rez les horaires de travail de vos employÃ©s pour la semaine\n                sÃ©lectionnÃ©e. Chaque semaine a son propre planning indÃ©pendant.\n              </PageDescription>\n            </TitleContainer>\n          </HeaderLeft>\n          <div>\n            <WeekNavigation>\n              <div>\n                <h3>\n                  Semaine du {formatDate(currentWeekStart)} au{\" \"}\n                  {formatDate(getWeekEnd(currentWeekStart))}\n                </h3>\n              </div>\n              <WeekActions>\n                <ActionButton variant=\"outline\" onClick={goToPreviousWeek}>\n                  <FaArrowLeft /> Semaine prÃ©cÃ©dente\n                </ActionButton>\n                <ActionButton variant=\"outline\" onClick={goToCurrentWeek}>\n                  <FaCalendarDay /> Semaine actuelle\n                </ActionButton>\n                <ActionButton variant=\"outline\" onClick={goToNextWeek}>\n                  Semaine suivante <FaArrowRight />\n                </ActionButton>\n                <ExportAllButton\n                  variant=\"secondary\"\n                  onClick={() => setShowExportOptions(!showExportOptions)}\n                >\n                  <FaFilePdf /> Options d'export\n                </ExportAllButton>\n              </WeekActions>\n            </WeekNavigation>\n          </div>\n        </ScheduleHeader>\n\n        <InfoMessage>\n          <strong>Note:</strong> Les plannings sont spÃ©cifiques Ã  chaque\n          semaine. Lorsque vous changez de semaine, vous verrez un planning\n          diffÃ©rent. Les modifications apportÃ©es Ã  une semaine n'affectent pas\n          les autres semaines.\n        </InfoMessage>\n\n        {!editingEmployeeId && (\n          <>\n            <SearchContainer>\n              <EmployeeSearchInput\n                type=\"text\"\n                placeholder=\"Rechercher un employÃ© par nom, prÃ©nom ou email...\"\n                value={searchQuery}\n                onChange={handleSearchChange}\n              />\n            </SearchContainer>\n\n            <ScheduleFilters>\n              <FilterContainer>\n                <FilterSelect\n                  value={selectedDepartment}\n                  onChange={handleDepartmentChange}\n                  placeholder=\"Tous les dÃ©partements\"\n                >\n                  <option value=\"\">Tous les dÃ©partements</option>\n                  {uniqueDepartments.map((dept) => (\n                    <option key={dept} value={dept}>\n                      {dept}\n                    </option>\n                  ))}\n                </FilterSelect>\n              </FilterContainer>\n\n              <FilterContainer>\n                <FilterSelect\n                  value={selectedRole}\n                  onChange={handleRoleChange}\n                  placeholder=\"Tous les rÃ´les\"\n                >\n                  <option value=\"\">Tous les rÃ´les</option>\n                  {uniqueRoles.map((role) => (\n                    <option key={role} value={role}>\n                      {role}\n                    </option>\n                  ))}\n                </FilterSelect>\n              </FilterContainer>\n            </ScheduleFilters>\n\n            {showExportOptions && (\n              <ExportOptions>\n                <ExportOptionsTitle>\n                  <FaFilePdf /> Options d'exportation PDF\n                </ExportOptionsTitle>\n                <ExportOptionsGrid>\n                  <ExportOptionCard onClick={generateAllEmployeesPDF}>\n                    <ExportOptionTitle>\n                      <FaUsers /> Planning global\n                    </ExportOptionTitle>\n                    <ExportOptionDescription>\n                      Exporter le planning de tous les employÃ©s affichÃ©s dans un\n                      seul document PDF\n                    </ExportOptionDescription>\n                  </ExportOptionCard>\n\n                  {uniqueDepartments.map((dept) => (\n                    <ExportOptionCard\n                      key={dept}\n                      onClick={() => generateDepartmentPDF(dept)}\n                    >\n                      <ExportOptionTitle>\n                        <FaUsers /> DÃ©partement: {dept}\n                      </ExportOptionTitle>\n                      <ExportOptionDescription>\n                        Exporter uniquement le planning des employÃ©s du\n                        dÃ©partement {dept}\n                      </ExportOptionDescription>\n                    </ExportOptionCard>\n                  ))}\n                </ExportOptionsGrid>\n              </ExportOptions>\n            )}\n\n            <Card>\n              <CardHeader>\n                <PlanningTitle>\n                  {filteredEmployees.length > 1\n                    ? `Plannings hebdomadaires (${filteredEmployees.length})`\n                    : \"Planning hebdomadaire\"}\n                </PlanningTitle>\n              </CardHeader>\n              <CardContent>\n                {filteredEmployees.length === 0 ? (\n                  <NoResultsMessage>\n                    {searchQuery\n                      ? \"Aucun employÃ© trouvÃ© avec cette recherche.\"\n                      : \"Aucun employÃ© trouvÃ© avec les filtres sÃ©lectionnÃ©s.\"}\n                  </NoResultsMessage>\n                ) : (\n                  <>\n                    <WeeklyScheduleGrid\n                      employees={filteredEmployees}\n                      weekStart={currentWeekStart}\n                      scheduleData={scheduleData}\n                      onChange={handleScheduleChange}\n                      readOnly={false}\n                      onEditEmployee={handleEditEmployee}\n                      onGeneratePDF={generateEmployeePDF}\n                    />\n                  </>\n                )}\n              </CardContent>\n            </Card>\n          </>\n        )}\n\n        {editingEmployeeId && (\n          <Card>\n            <CardHeader>\n              <div className=\"flex justify-between items-center\">\n                <h2>Modifier le planning</h2>\n                <Button variant=\"secondary\" onClick={handleCancelEdit}>\n                  Annuler\n                </Button>\n              </div>\n            </CardHeader>\n            <CardContent>\n              {editingEmployee && (\n                <EmployeeScheduleForm\n                  employee={editingEmployee}\n                  weekStart={currentWeekStart}\n                  scheduleData={\n                    scheduleData.find(\n                      (s) => s.employeeId === editingEmployeeId\n                    ) || {\n                      employeeId: editingEmployeeId,\n                      days: Array(7)\n                        .fill()\n                        .map(() => ({\n                          type: \"work\",\n                          hours: \"0\",\n                          absence: \"\",\n                          note: \"\",\n                          timeSlots: [],\n                        })),\n                    }\n                  }\n                  onSave={handleScheduleChange}\n                  onCancel={handleCancelEdit}\n                />\n              )}\n            </CardContent>\n          </Card>\n        )}\n      </ScheduleContainer>\n    </div>\n  );\n};\n\nexport default WeeklySchedulePage;\n"],"names":["AuthService","login","async","email","password","console","log","response","apiRequest","API_ENDPOINTS","LOGIN","error","success","message","token","localStorage","setItem","JSON","stringify","id","role","first_name","last_name","user","register","REGISTER","userData","logout","removeItem","getCurrentUser","userStr","getItem","parse","WeeklyScheduleService","getAll","WEEKLY_SCHEDULES","schedules","getByWeek","weekStart","getByEmployee","EMPLOYEES","SCHEDULES","employeeId","getByEmployeeAndWeek","create","scheduleData","schedule","update","delete","HourBalanceService","HOUR_BALANCE","BY_EMPLOYEE","balance","hour_balance","Object","keys","length","values","warn","updateBalance","balanceData","fadeIn","keyframes","FormContainer","styled","div","_ref","theme","colors","background","primary","_ref2","text","_ref3","mode","FormTitle","h3","_ref4","EmployeeInfo","_ref5","border","EmployeeName","EmployeeDetails","_ref6","secondary","DaysGrid","DayCard","_ref7","$isWeekend","tertiary","_ref8","_ref9","_ref10","DayHeader","_ref11","DayName","_ref12","DayDate","_ref13","InputGroup","InputLabel","label","_ref14","ButtonGroup","ActionButton","Button","TotalHours","_ref15","TimeSlotContainer","TimeSlot","TimeInput","FormInput","_ref16","input","_ref17","_ref18","_ref19","main","_ref20","AddSlotButton","RemoveSlotButton","RadioGroup","RadioLabel","_ref21","RadioInput","_ref22","StyledFormInput","_ref23","_ref24","_ref25","_ref26","_ref27","_ref28","placeholder","WeekInfo","_ref29","info","dark","_ref30","light","_ref31","calculateDayHours","timeSlots","totalHours","forEach","slot","start","end","startParts","split","map","Number","endParts","startDate","Date","setHours","endDate","setDate","getDate","hours","calculateHours","toFixed","_ref32","employee","onSave","onCancel","emptyDays","Array","fill","type","absence","note","initialScheduleData","useMemo","isArray","days","formData","setFormData","useState","isSubmitting","setIsSubmitting","errors","setErrors","weekDays","getDaysOfWeek","isWeekend","useCallback","dayIndex","handleTypeChange","prevFormData","newFormData","handleAbsenceChange","value","handleNoteChange","addTimeSlot","newTimeSlots","removeTimeSlot","slotIndex","splice","updateTimeSlot","field","calculateTotalHours","reduce","total","day","parseFloat","handleSave","formattedSchedule","updatedScheduleData","formatDateForInput","_jsxs","children","formatDate","variant","onClick","_jsx","FaTimes","disabled","FaSave","department","contractHours","index","_formData$index","_formData$index2","_formData$index3","_formData$index4","_formData$index5","_formData$index5$time","_formData$index6","_formData$index7","name","checked","onChange","e","target","useHourBalance","loading","setLoading","setError","getEmployeeBalance","result","err","updateEmployeeBalance","Error","toast","standardizeScheduleData","undefined","week_start","employee_id","convertDayToStandardFormat","createEmptyDay","isAbsent","trim","prepareScheduleForApi","standardSchedule","schedule_data","total_hours","parseScheduleFromApi","apiData","ScheduleGrid","GridCell","HeaderCell","props","sortable","EmployeeCell","TotalCell","DayCell","BreakInfo","HoursValue","AbsenceValue","NoteText","ActionCell","ExportCell","EmployeeRow","QuickEditButton","button","WeeklyScheduleGrid","employees","readOnly","onEditEmployee","onGeneratePDF","useTheme","employeesArray","scheduleDataArray","validWeekStart","date","isNaN","getTime","sortConfig","setSortConfig","key","direction","daysOfWeek","sortedEmployees","sort","a","b","aValue","bValue","lastName","firstName","toLowerCase","calculateEmployeeTotal","requestSort","getSortIcon","FaSortAmountUp","size","FaSortAmountDown","findEmployeeSchedule","find","handleEditClick","isEmployeeAbsent","formatDayCell","hasTimeSlots","_Fragment","break","title","getEmployeeHoursCounter","emp","workedHours","diff","useEffect","loadHourBalances","generatePDF","tempElement","document","createElement","style","position","left","top","width","weekStartDate","weekEndDate","formattedWeekStart","formattedWeekEnd","sum","content","dayDate","isWeekendDay","getDayName","absenceReason","join","notes","DOMPurify","sanitize","innerHTML","body","appendChild","html2canvas","scale","useCORS","logging","then","canvas","imgData","toDataURL","pdf","jsPDF","imgWidth","internal","pageSize","getWidth","imgHeight","height","addImage","save","removeChild","formatEmployeeCell","_","stopPropagation","FaEdit","color","startsWith","employeeSchedule","formattedDays","handleGeneratePDF","FaFilePdf","defaultProps","HeaderContainer","Title","h1","_theme$colors$text","Description","p","_theme$colors$text2","ActionsContainer","description","actions","rotate","SpinnerContainer","$center","SpinnerElement","$size","SpinnerText","Spinner","useWeeklySchedules","setSchedules","socket","isConnected","notifyDataChange","useWebSocket","handleWebSocketMessage","event","data","prevSchedules","some","scheduleId","filter","addEventListener","removeEventListener","fetchSchedules","standardizedSchedules","createSchedule","newSchedule","prev","updateSchedule","updatedSchedule","deleteSchedule","Lottie","require","ScheduleContainer","ScheduleHeader","ScheduleFilters","WeekNavigation","WeekActions","ExportAllButton","FilterContainer","FilterSelect","FormSelect","SearchContainer","EmployeeSearchInput","NoResultsMessage","PlanningTitle","h2","HeaderLeft","AnimationContainer","TitleContainer","PageTitle","PageDescription","ExportOptions","ExportOptionsTitle","h4","ExportOptionsGrid","ExportOptionCard","ExportOptionTitle","h5","ExportOptionDescription","InfoMessage","WeeklySchedulePage","navigate","useNavigate","weekStartParam","useParams","prevScheduleDataRef","useRef","prevFormattedScheduleDataRef","currentWeekStart","setCurrentWeekStart","getWeekStart","setScheduleData","editingEmployeeId","setEditingEmployeeId","selectedDepartment","setSelectedDepartment","selectedRole","setSelectedRole","searchQuery","setSearchQuery","showExportOptions","setShowExportOptions","employeesLoading","employeesError","useEmployees","schedulesLoading","schedulesError","formattedScheduleData","currentScheduleDataStr","currentFormattedScheduleDataStr","current","catch","editingEmployee","uniqueDepartments","Set","dept","uniqueRoles","formattedDate","replace","filteredEmployees","filtered","query","includes","goToPreviousWeek","addWeeks","goToNextWeek","goToCurrentWeek","handleEditEmployee","handleCancelEdit","handleSearchChange","handleDepartmentChange","handleRoleChange","handleScheduleChange","existingScheduleResult","prevData","existingIndex","findIndex","s","newData","push","PageHeader","options","loop","autoplay","animationData","thinkingAnimation","rendererSettings","preserveAspectRatio","getWeekEnd","FaArrowLeft","FaCalendarDay","FaArrowRight","generateAllEmployeesPDF","activeEmployees","every","dayData","cellContent","FaUsers","departmentEmployees","totalColor","generateDepartmentPDF","Card","CardHeader","CardContent","className","EmployeeScheduleForm"],"sourceRoot":""}