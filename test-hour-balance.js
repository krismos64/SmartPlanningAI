const db = require('./backend/config/db'); const WorkHours = require('./backend/models/WorkHours'); const Employee = require('./backend/models/Employee'); async function testUpdateHourBalance() { try { console.log('Test de mise à jour du solde d\'heures...'); const employeeId = 1; const hourData = { employee_id: employeeId, date: new Date().toISOString().split('T')[0], expected_hours: 0, actual_hours: 1.5, balance: 1.5, description: 'Test automatisé', user_id: 1 }; console.log('Données:', hourData); const result = await WorkHours.create(hourData); console.log('Résultat:', result); const updatedBalance = await Employee.updateHourBalance(employeeId); console.log('Nouveau solde:', updatedBalance); process.exit(0); } catch (error) { console.error('Erreur:', error); process.exit(1); } } testUpdateHourBalance();
